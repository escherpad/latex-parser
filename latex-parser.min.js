!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["latex-parser"]=e():t["latex-parser"]=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var u=n[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,e),u.l=!0,u.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){"use strict";function r(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{writable:!0,enumerable:!0,configurable:!0};if(!(t instanceof Object))throw new TypeError('"target" isn\'t an Object instance');if(void 0!==e){if(!(e instanceof Object))throw new TypeError('"properties" isn\'t an Object instance');if(void 0===r)r={writable:!0,enumerable:!0,configurable:!0};else if(!(r instanceof Object))throw new TypeError('"attributes" isn\'t an Object instance');if(void 0===n)for(var u in e)void 0!==e[u]&&Object.defineProperty(t,u,Object.create(r,{value:{value:e[u]}}));else if(n instanceof Array)n.forEach(function(n){void 0!==e[n]&&Object.defineProperty(t,n,Object.create(r,{value:{value:e[n]}}))});else{if(!(n instanceof Object))throw new TypeError('"keys" isn\'t an Object instance');for(var i in n){var o=n[i];void 0!==e[o]&&Object.defineProperty(t,i,Object.create(r,{value:{value:e[o]}}))}}}}function u(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!(t instanceof Object))throw new TypeError('"target" isn\'t an Object instance');if(void 0===e)return!0;if(!(e instanceof Object))throw new TypeError('"properties" isn\'t an Object instance');if(void 0===r&&(r=!0),void 0===n){for(var u in e)if(t[u]!==e[u]&&(void 0!==e[u]||!r))return!1}else{if(n instanceof Array)return n.every(function(n){return t[n]===e[n]||void 0===e[n]&&r});if(!(n instanceof Object))throw new TypeError('"keys" isn\'t an Object instance');for(var i in n){var o=n[i];if(t[i]!==e[o]&&(void 0!==e[o]||!r))return!1}}return!0}function i(t){return"number"==typeof t}function o(t){return"string"==typeof t}function a(t,e){if(!t)throw new Error(e);return t}function c(t,e){if(!(t instanceof Object))throw new TypeError(e||"Expected Object");return t}function f(t,e){if("string"!=typeof t)throw new TypeError(e||"Expected string");return t}function s(t,e){if(!l(t))throw new TypeError(e||"Expected Array");return t}function l(t){return t.constructor===Array}function p(t,e){return[].concat.apply([],t.map(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.updateProperties=r,e.testProperties=u,e.isNumber=i,e.isString=o,e.mustNotBeUndefined=a,e.mustBeObject=c,e.mustBeString=f,e.mustBeArray=s,e.isArray=l,e.concatMap=p;e.mustBeNumber=function(t,e){if(!i(t))throw new TypeError(e||"Expected number");return t},e.mconcat=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduceRight(t)},e.snd=function(t){return t[1]}},function(t,e,n){"use strict";function r(t){return i(t)||o(t)}function u(t){return U.hasOwnProperty(t)}function i(t){return u(t.type)&&(0,I.isNumber)(t.value)}function o(t){return v(t.expression)}function a(t){if(void 0===t)return!1;switch(t){case"Parentheses":case"Square":case"Dollar":return!0;default:return!1}}function c(t,e){return void 0!==t&&(void 0===e?"string"==typeof t.name:e===t.name)}function f(t){return t.latex instanceof Array}function s(t){return void 0!==t&&"string"==typeof t.text}function l(t){return void 0!==t&&v(t.latex)}function p(t){return t.arguments instanceof Array}function m(t,e){return k(e)?t:k(t)?e:{head:t,tail:e}}function h(t){switch(t){case"#":return"\\#";case"$":return"\\$";case"%":return"\\%";case"^":return"\\^{}";case"&":return"\\&";case"{":return"\\{";case"}":return"\\}";case"~":return"\\~{}";case"\\":return"\\textbackslash{}";case"_":return"\\_{}";default:return t}}function d(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return 0===n.length?"string"==typeof t.type:n.some(function(e){return t.type===e})}function v(t){return g(t)}function g(t){return k(t)||y(t)||x(t)||b(t)||T(t)||O(t)||A(t)||j(t)}function y(t){return void 0!==t&&void 0!==t.type&&s(t)&&d(t,G)}function x(t){return c(t)&&p(t)&&d(t,K,Q)}function w(t){return x(t)&&0===t.arguments.length}function b(t,e){return d(t,W)}function T(t){return l(t)&&d(t)&&a(t.type)}function O(t){return void 0!==t&&"boolean"==typeof t.noNewPage&&(void 0===t.measure||r(t.measure))}function A(t){return l(t)&&d(t,Z)}function E(t){return d(t,"FixArg")}function X(t){return d(t,"OptArg")}function j(t){return s(t)&&d(t,J)}function k(t){return void 0!==t&&0===Object.keys(t).length}function P(t){return{type:"FixArg",latex:t}}function _(t){return 1===t.length?{type:"OptArg",latex:t[0]}:{type:"MOptArg",latex:t}}function M(t){return{type:"SymArg",latex:t}}function C(t){return{type:"ParArg",latex:t}}function S(t){return{type:"MOptArg",latex:t}}function B(t){return{type:"MSymArg",latex:t}}function N(t){return{type:"MParArg",latex:t}}function q(t){return{name:t,arguments:[],type:Q}}function F(t){return{text:t,type:G}}function D(t,e){return{latex:e,type:t}}function R(t){return{latex:t,type:Z}}function L(t){return{text:t,type:J}}function z(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return{name:t,arguments:n,type:K}}function $(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),u=2;u<n;u++)r[u-2]=arguments[u];return{name:t,latex:e,arguments:r,type:W}}Object.defineProperty(e,"__esModule",{value:!0}),e.newTeXMathDol=e.getPreamble=e.getBody=e.matchEnvArg=e.matchEnv=e.lookForEnv=e.matchCommandArg=e.matchCommand=e.lookForCommand=e.protectString=e.fromStringLaTeX=e.mempty=e.typeTeXCommS=e.typeTeXComm=e.typeTeXRaw=e.typeTeXComment=e.typeTeXBraces=e.typeTeXEnv=e.typeTeXSeq=e.mathTypes=e.measureTypes=void 0;var H=function(){function t(t,e){var n=[],r=!0,u=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){u=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(u)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.isMeasure=r,e.isMeasureType=u,e.isBuiltInMeasure=i,e.isCustomMeasure=o,e.isMathType=a,e.isNameHaving=c,e.isMultipleLaTeXHaving=f,e.isTextHaving=s,e.isLaTeXHaving=l,e.isArgumentHaving=p,e.mappend=m,e.protectChar=h,e.isTypeHaving=d,e.isLaTeXBlock=v,e.isLaTeXBlockNoSeq=g,e.isTeXRaw=y,e.isTeXComm=x,e.isTeXCommS=w,e.isTeXEnv=b,e.isTeXMath=T,e.isTeXLineBreak=O,e.isTeXBraces=A,e.isFixArg=E,e.isOptArg=X,e.isTeXComment=j,e.isTeXEmpty=k,e.newFixArg=P,e.newOptArg=_,e.newSymArg=M,e.newParArg=C,e.newMOptArg=S,e.newMSymArg=B,e.newMParArg=N,e.newCommandS=q,e.newTeXRaw=F,e.newTeXMath=D,e.newTeXBraces=R,e.newTeXComment=L,e.newTeXComm=z,e.newTeXEnv=$;var I=n(0),U=e.measureTypes={pt:!0,mm:!0,cm:!0,in:!0,ex:!0,em:!0},W=(e.mathTypes={Parentheses:"Parentheses",Square:"Square",Dollar:"Dollar"},e.typeTeXSeq="TeXSeq",e.typeTeXEnv="TeXEnv"),Z=e.typeTeXBraces="TeXBraces",J=e.typeTeXComment="TeXComment",G=e.typeTeXRaw="TeXRaw",K=e.typeTeXComm="TeXComm",Q=e.typeTeXCommS="TeXCommS",V=e.mempty={},Y=(e.fromStringLaTeX=function(t){return F(Y(t))},e.protectString=function(t){for(var e=[],n=0;n<t.length;n++)e.push(h(t.charAt(n)));return e.join()}),tt=(e.lookForCommand=function(t,e){return tt(function(e){return e===t},e).map(I.snd)},e.matchCommand=function t(e,n){if(w(n))return e(n.name)?[[n.name,[]]]:[];if(x(n)){var r=(0,I.concatMap)(n.arguments,function(t){return et(e,t)});if(e(n.name)){return[[n.name,n.arguments]].concat(r)}return r}return T(n)||A(n)?t(e,n.latex):[]}),et=e.matchCommandArg=function(t,e){if(f(e)){return[].concat.apply([],(0,I.mustBeArray)(e.latex).map(function(e){return tt(t,e)}))}return tt(t,e.latex)},nt=function(t){var e=H(t,3);e[0];return[e[1],e[2]]},rt=e.lookForEnv=function(t,e){return ut(function(e){return e===t},e).map(nt)},ut=e.matchEnv=function t(e,n){if(x(n)){return(0,I.concatMap)(n.arguments,function(t){return it(e,t)})}if(b(n)){var r=(0,I.concatMap)(n.arguments,function(t){return it(e,t)}).concat(t(e,n.latex));if(e(n.name)){return[[n.name,n.arguments,n.latex]].concat(r)}return r}return T(n)||A(n)?t(e,n.latex):[]},it=e.matchEnvArg=function(t,e){return f(e)?(0,I.concatMap)(e.latex,function(e){return ut(t,e)}):ut(t,e.latex)};e.getBody=function(t){var e=rt("document",t);return e.length>0?e[0]:void 0},e.getPreamble=function(t){return b(t,"document")?V:t},e.newTeXMathDol=D.bind(void 0,"Dollar")},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function u(t,e){var n=t.length,r=e.length;if(0===n)return e;if(0===r)return t;for(var u={},i=0;i<n;i++)u[t[i]]=!0;for(var o=0;o<r;o++)u[e[o]]=!0;var a=[];for(var c in u)u.hasOwnProperty(c)&&a.push(c);return a.sort(),a}function i(t,e){if(!e)return t;if(t.furthest>e.furthest)return t;var n=t.furthest===e.furthest?u(t.expected,e.expected):e.expected;return{status:t.status,index:t.index,value:t.value,furthest:e.furthest,expected:n}}function o(t,e,n,r){return(0,v.Parser)(function(u,o){for(var a=r,c=0,f=void 0;o<u.length;){var s=e._(u,o);if(s.status){o=(0,y.mustBeNumber)(s.index);break}var l=t._(u,o);if(h(l))return l;if(f=(0,y.mustNotBeUndefined)(i(l,f)),h(f))return f;c++;var p=(0,y.mustNotBeUndefined)(f.value);a=n(a,p),o=(0,y.mustBeNumber)(f.index)}return d(i((0,v.makeSuccess)(o,a),f))})}function a(t,e){return o(t,e,function(t,e){return t.concat([e])},[])}function c(t){return(0,v.Parser)(function(e,n){var r=e.charAt(n);if(n>=e.length||t(r))return(0,v.makeFailure)(n,"text character");var u=[r];n++;for(var i=e.charAt(n);!t(i)&&n<e.length;)u.push(i),n++,i=e.charAt(n);return(0,v.makeSuccess)(n,u.join(""))})}function f(t,e){return(void 0===e?P:e).hasOwnProperty(t)}function s(t,e){return(void 0===e?_:e).hasOwnProperty(t)}function l(t){return t>="A"&&t<="Z"}function p(t){return t>="a"&&t<="z"}function m(t){return void 0!==t&&!0===t.status}function h(t){return void 0!==t&&!1===t.status}function d(t){if(!m(t))throw new Error("Expected parse to be success: "+JSON.stringify(t));return t}Object.defineProperty(e,"__esModule",{value:!0}),e.dolMath=e.command=e.cmdArgs=e.cmdArg=e.optArg=e.fixArg=e.endCmd=e.specialChar=e.environment=e.env=e.latexParser=e.latexBlockParser=e.commandSymbol=e.mathSymbol=e.notTextDefaultAndNotClosingBracket=e.notTextDefault=e.specialCharsDefault=e.comment=e.text2=e.text=e.takeTill=e.defaultParserConf=void 0,e.isSpecialCharacter=f,e.isNotText=s,e.isOk=m,e.isNotOk=h,e.mustBeOk=d;var v=n(4),g=n(1),y=n(0),x=(e.defaultParserConf={verbatimEnvironments:["verbatim"]},e.takeTill=function(t){return(0,v.takeWhile)(function(e){return!t(e)})}),w=(0,v.regexp)(/[^\n]*/),b=(0,v.regexp)(/\n?/),T=((0,v.regexp)(/\s*/m),(0,v.string)("%")),O=(0,v.string)("["),A=(0,v.string)("]"),E=e.text=c(s).map(function(t){return(0,g.newTeXRaw)(t)}),X=e.text2=A.then(c(s).map(function(t){return(0,g.newTeXRaw)(t)})),j=(0,v.regexp)(/ */).map(g.newTeXRaw),k=e.comment=T.then(w).skip(b).map(g.newTeXComment),P=e.specialCharsDefault={"'":!0,"(":!0,")":!0,",":!0,".":!0,"-":!0,'"':!0,"!":!0,"^":!0,$:!0,"&":!0,"#":!0,"{":!0,"}":!0,"%":!0,"~":!0,"|":!0,"/":!0,":":!0,";":!0,"=":!0,"[":!0,"]":!0,"\\":!0,"`":!0," ":!0},_=e.notTextDefault={$:!0,"%":!0,"\\":!0,"{":!0,"]":!0,"}":!0},M=(e.notTextDefaultAndNotClosingBracket={$:!0,"%":!0,"\\":!0,"{":!0,"}":!0},e.mathSymbol=(0,v.string)("$"),e.commandSymbol=(0,v.string)("\\")),C=e.latexBlockParser=(0,v.lazy)(function(){return(0,v.alt)((0,v.alt)(E,U,k,X,N,I))}),S=(e.latexParser=C.many(),(0,v.string)("{").then(C.many()).skip((0,v.string)("}"))),B=e.env=(0,v.Parser)(function(t,e){var n=(0,v.string)("\\begin").then((0,v.string)("{")).then(j).then((0,v.regexp)(/[a-zA-Z]+/)).skip(j).skip((0,v.string)("}"))._(t,e);if(h(n))return n;e=(0,y.mustBeNumber)(n.index);var r=n.value;return a(C,(0,v.string)("\\end").then((0,v.string)("{")).then(j).then((0,v.string)(r)).then(j).then((0,v.string)("}"))).map(function(t){return(0,g.newTeXEnv)(r,t)})._(t,e)}),N=e.environment=(0,v.alt)(S,B),q=e.specialChar=(0,v.test)(f),F=e.endCmd=function(t){return!p(t)&&!l(t)},D=(0,v.string)("{"),R=(0,v.string)("}"),L=e.fixArg=D.then(a(C,R)).map(g.newFixArg),z=e.optArg=O.then(a(C,A)).map(g.newOptArg),$=e.cmdArg=(0,v.alt)(L,z),H=e.cmdArgs=(0,v.alt)((0,v.string)("{}").map(function(){return[]}),$.map(function(t){return t}).atLeast(0)).map(function(t){return t}),I=e.command=(0,v.alt)(M.then(v.eof).map(function(){return{}}),(0,v.seqMap)(M,(0,v.alt)(q,x(F)),H,function(t,e,n){return void 0!==n?g.newTeXComm.apply(void 0,[e].concat(r(n))):(0,g.newTeXComm)(e)})).map(function(t){return t}),U=e.dolMath=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"$";return(0,v.string)(e).then(C.many()).skip((0,v.string)(n)).map(function(e){return(0,g.newTeXMath)(t,e)})}("Dollar")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var u=n(1);Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})});var i=n(2);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})})},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var u=n[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,e),u.l=!0,u.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);this._=t}function u(t){return t instanceof r}function i(t){return"[object Array]"==={}.toString.call(t)}function o(t,e){return{status:!0,index:t,value:e,furthest:-1,expected:[]}}function a(t,e){return{status:!1,index:-1,value:null,furthest:t,expected:[e]}}function c(t,e){if(!e)return t;if(t.furthest>e.furthest)return t;var n=t.furthest===e.furthest?s(t.expected,e.expected):e.expected;return{status:t.status,index:t.index,value:t.value,furthest:e.furthest,expected:n}}function f(t,e){var n=t.slice(0,e).split("\n");return{offset:e,line:n.length,column:n[n.length-1].length+1}}function s(t,e){var n=t.length,r=e.length;if(0===n)return e;if(0===r)return t;for(var u={},i=0;i<n;i++)u[t[i]]=!0;for(var o=0;o<r;o++)u[e[o]]=!0;var a=[];for(var c in u)u.hasOwnProperty(c)&&a.push(c);return a.sort(),a}function l(t){if(!u(t))throw new Error("not a parser: "+t)}function p(t){if(!i(t))throw new Error("not an array: "+t)}function m(t){if("number"!=typeof t)throw new Error("not a number: "+t)}function h(t){if(!(t instanceof RegExp))throw new Error("not a regexp: "+t);for(var e=w(t),n=0;n<e.length;n++){var r=e.charAt(n);if("i"!==r&&"m"!==r&&"u"!==r)throw new Error('unsupported regexp flag "'+r+'": '+t)}}function d(t){if("function"!=typeof t)throw new Error("not a function: "+t)}function v(t){if("string"!=typeof t)throw new Error("not a string: "+t)}function g(t){return 1===t.length?t[0]:"one of "+t.join(", ")}function y(t,e){var n=e.index,r=n.offset;if(r===t.length)return", got the end of the input";var u=r>0?"'...":"'",i=t.length-r>12?"...'":"'";return" at line "+n.line+" column "+n.column+", got "+u+t.slice(r,r+12)+i}function x(t,e){return"expected "+g(e.expected)+y(t,e)}function w(t){var e=""+t;return e.slice(e.lastIndexOf("/")+1)}function b(t){return RegExp("^(?:"+t.source+")",w(t))}function T(){for(var t=[].slice.call(arguments),e=t.length,n=0;n<e;n+=1)l(t[n]);return r(function(n,r){for(var u,i=new Array(e),a=0;a<e;a+=1){if(u=c(t[a]._(n,r),u),!u.status)return u;i[a]=u.value,r=u.index}return c(o(r,i),u)})}function O(){for(var t={},e=0,n=[].slice.call(arguments),a=n.length,f=0;f<a;f+=1){var s=n[f];if(!u(s)){if(i(s)&&2===s.length&&"string"==typeof s[0]&&u(s[1])){var l=s[0];if(t[l])throw new Error("seqObj: duplicate key "+l);t[l]=!0,e++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===e)throw new Error("seqObj expects at least one named parser, found zero");return r(function(t,e){for(var r,u={},f=0;f<a;f+=1){var s,l;if(i(n[f])?(s=n[f][0],l=n[f][1]):(s=null,l=n[f]),r=c(l._(t,e),r),!r.status)return r;s&&(u[s]=r.value),e=r.index}return c(o(e,u),r)})}function A(){var t=[].slice.call(arguments);if(0===t.length)throw new Error("seqMap needs at least one argument");var e=t.pop();return d(e),T.apply(null,t).map(function(t){return e.apply(null,t)})}function E(t){var e={};for(var n in t)({}).hasOwnProperty.call(t,n)&&function(n){var r=function(){return t[n](e)};e[n]=z(r)}(n);return e}function X(){var t=[].slice.call(arguments),e=t.length;if(0===e)return C("zero alternates");for(var n=0;n<e;n+=1)l(t[n]);return r(function(e,n){for(var r,u=0;u<t.length;u+=1)if(r=c(t[u]._(e,n),r),r.status)return r;return r})}function j(t,e){return k(t,e).or(M([]))}function k(t,e){l(t),l(e);var n=e.then(t).many();return t.chain(function(t){return n.map(function(e){return[t].concat(e)})})}function P(t){v(t);var e="'"+t+"'";return r(function(n,r){var u=r+t.length,i=n.slice(r,u);return i===t?o(u,i):a(r,e)})}function _(t,e){h(t),arguments.length>=2?m(e):e=0;var n=b(t),u=""+t;return r(function(t,r){var i=n.exec(t.slice(r));if(i){if(0<=e&&e<=i.length){var c=i[0],f=i[e];return o(r+c.length,f)}return a(r,"valid match group (0 to "+i.length+") in "+u)}return a(r,u)})}function M(t){return r(function(e,n){return o(n,t)})}function C(t){return r(function(e,n){return a(n,t)})}function S(t){if(u(t))return r(function(e,n){var r=t._(e,n);return r.index=n,r.value="",r});if("string"==typeof t)return S(P(t));if(t instanceof RegExp)return S(_(t));throw new Error("not a string, regexp, or parser: "+t)}function B(t){return l(t),r(function(e,n){var r=t._(e,n),u=e.slice(n,r.index);return r.status?a(n,'not "'+u+'"'):o(n,null)})}function N(t){return d(t),r(function(e,n){var r=e.charAt(n);return n<e.length&&t(r)?o(n+1,r):a(n,"a character matching "+t)})}function q(t){return N(function(e){return t.indexOf(e)>=0})}function F(t){return N(function(e){return t.indexOf(e)<0})}function D(t){return r(t(o,a))}function R(t,e){return N(function(n){return t<=n&&n<=e}).desc(t+"-"+e)}function L(t){return d(t),r(function(e,n){for(var r=n;r<e.length&&t(e.charAt(r));)r++;return o(r,e.slice(n,r))})}function z(t,e){arguments.length<2&&(e=t,t=void 0);var n=r(function(t,r){return n._=e()._,n._(t,r)});return t?n.desc(t):n}function $(){return C("fantasy-land/empty")}var H=r.prototype;H.parse=function(t){if("string"!=typeof t)throw new Error(".parse must be called with a string as its argument");var e=this.skip(Z)._(t,0);return e.status?{status:!0,value:e.value}:{status:!1,index:f(t,e.furthest),expected:e.expected}},H.tryParse=function(t){var e=this.parse(t);if(e.status)return e.value;var n=x(t,e),r=new Error(n);throw r.type="ParsimmonError",r.result=e,r},H.or=function(t){return X(this,t)},H.trim=function(t){return this.wrap(t,t)},H.wrap=function(t,e){return A(t,this,e,function(t,e){return e})},H.thru=function(t){return t(this)},H.then=function(t){return l(t),T(this,t).map(function(t){return t[1]})},H.many=function(){var t=this;return r(function(e,n){for(var r=[],u=void 0;;){if(u=c(t._(e,n),u),!u.status)return c(o(n,r),u);n=u.index,r.push(u.value)}})},H.tie=function(){return this.map(function(t){p(t);for(var e="",n=0;n<t.length;n++)v(t[n]),e+=t[n];return e})},H.times=function(t,e){var n=this;return arguments.length<2&&(e=t),m(t),m(e),r(function(r,u){for(var i=[],a=void 0,f=void 0,s=0;s<t;s+=1){if(a=n._(r,u),f=c(a,f),!a.status)return f;u=a.index,i.push(a.value)}for(;s<e&&(a=n._(r,u),f=c(a,f),a.status);s+=1)u=a.index,i.push(a.value);return c(o(u,i),f)})},H.result=function(t){return this.map(function(){return t})},H.atMost=function(t){return this.times(0,t)},H.atLeast=function(t){return A(this.times(t),this.many(),function(t,e){return t.concat(e)})},H.map=function(t){d(t);var e=this;return r(function(n,r){var u=e._(n,r);return u.status?c(o(u.index,t(u.value)),u):u})},H.skip=function(t){return T(this,t).map(function(t){return t[0]})},H.mark=function(){return A(I,this,I,function(t,e,n){return{start:t,value:e,end:n}})},H.node=function(t){return A(I,this,I,function(e,n,r){return{name:t,value:n,start:e,end:r}})},H.sepBy=function(t){return j(this,t)},H.sepBy1=function(t){return k(this,t)},H.lookahead=function(t){return this.skip(S(t))},H.notFollowedBy=function(t){return this.skip(B(t))},H.desc=function(t){var e=this;return r(function(n,r){var u=e._(n,r);return u.status||(u.expected=[t]),u})},H.fallback=function(t){return this.or(M(t))},H.ap=function(t){return A(t,this,function(t,e){return t(e)})},H.chain=function(t){var e=this;return r(function(n,r){var u=e._(n,r);return u.status?c(t(u.value)._(n,u.index),u):u})},H.concat=H.or,H.empty=$,H.of=M,H["fantasy-land/ap"]=H.ap,H["fantasy-land/chain"]=H.chain,H["fantasy-land/concat"]=H.concat,H["fantasy-land/empty"]=H.empty,H["fantasy-land/of"]=H.of,H["fantasy-land/map"]=H.map;var I=r(function(t,e){return o(e,f(t,e))}),U=r(function(t,e){return e>=t.length?a(e,"any character"):o(e+1,t.charAt(e))}),W=r(function(t,e){return o(t.length,t.slice(e))}),Z=r(function(t,e){return e<t.length?a(e,"EOF"):o(e,null)}),J=_(/[0-9]/).desc("a digit"),G=_(/[0-9]*/).desc("optional digits"),K=_(/[a-z]/i).desc("a letter"),Q=_(/[a-z]*/i).desc("optional letters"),V=_(/\s*/).desc("optional whitespace"),Y=_(/\s+/).desc("whitespace");r.all=W,r.alt=X,r.any=U,r.createLanguage=E,r.custom=D,r.digit=J,r.digits=G,r.empty=$,r.eof=Z,r.fail=C,r.formatError=x,r.index=I,r.isParser=u,r.lazy=z,r.letter=K,r.letters=Q,r.lookahead=S,r.makeFailure=a,r.makeSuccess=o,r.noneOf=F,r.notFollowedBy=B,r.of=M,r.oneOf=q,r.optWhitespace=V,r.Parser=r,r.range=R,r.regex=_,r.regexp=_,r.sepBy=j,r.sepBy1=k,r.seq=T,r.seqMap=A,r.seqObj=O,r.string=P,r.succeed=M,r.takeWhile=L,r.test=N,r.whitespace=Y,r["fantasy-land/empty"]=$,r["fantasy-land/of"]=M,t.exports=r}])})}])});
//# sourceMappingURL=latex-parser.min.js.map