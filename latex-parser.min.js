!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["latex-parser"]=t():e["latex-parser"]=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=27)}([function(e,t,n){"use strict";function r(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{writable:!0,enumerable:!0,configurable:!0};if(!(e instanceof Object))throw new TypeError('"target" isn\'t an Object instance');if(void 0!==t){if(!(t instanceof Object))throw new TypeError('"properties" isn\'t an Object instance');if(void 0===r)r={writable:!0,enumerable:!0,configurable:!0};else if(!(r instanceof Object))throw new TypeError('"attributes" isn\'t an Object instance');if(void 0===n)for(var o in t)void 0!==t[o]&&Object.defineProperty(e,o,Object.create(r,{value:{value:t[o]}}));else if(n instanceof Array)n.forEach(function(n){void 0!==t[n]&&Object.defineProperty(e,n,Object.create(r,{value:{value:t[n]}}))});else{if(!(n instanceof Object))throw new TypeError('"keys" isn\'t an Object instance');for(var i in n){var a=n[i];void 0!==t[a]&&Object.defineProperty(e,i,Object.create(r,{value:{value:t[a]}}))}}}}function o(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!(e instanceof Object))throw new TypeError('"target" isn\'t an Object instance');if(void 0===t)return!0;if(!(t instanceof Object))throw new TypeError('"properties" isn\'t an Object instance');if(void 0===r&&(r=!0),void 0===n){for(var o in t)if(e[o]!==t[o]&&(void 0!==t[o]||!r))return!1}else{if(n instanceof Array)return n.every(function(n){return e[n]===t[n]||void 0===t[n]&&r});if(!(n instanceof Object))throw new TypeError('"keys" isn\'t an Object instance');for(var i in n){var a=n[i];if(e[i]!==t[a]&&(void 0!==t[a]||!r))return!1}}return!0}function i(e){return"number"==typeof e}function a(e){return"string"==typeof e}function u(e,t){if(!e)throw new Error(t);return e}function s(e,t){if(!(e instanceof Object))throw new TypeError(t||"Expected Object");return e}function c(e,t){if("string"!=typeof e)throw new TypeError(t||"Expected string");return e}function f(e,t){if(!l(e))throw new TypeError(t||"Expected Array");return e}function l(e){return e.constructor===Array}Object.defineProperty(t,"__esModule",{value:!0}),t.updateProperties=r,t.testProperties=o,t.isNumber=i,t.isString=a,t.mustNotBeUndefined=u,t.mustBeObject=s,t.mustBeString=c,t.mustBeArray=f,t.isArray=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e instanceof l}function u(e,t){if(!a(e))throw new Error(t);return e}Object.defineProperty(t,"__esModule",{value:!0}),t.Token=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)};t.isToken=a,t.mustBeToken=u;var f=n(13),l=t.Token=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,t),void 0===e)var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));else{if(!(e instanceof Object))throw new TypeError('"initialProperties" isn\'t an Object instance');var i=Object.create(e);i.parentNode=e.parentToken,i.childNodes=e.childTokens;var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i))}return o(n)}return i(t,e),s(t,[{key:"toString",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,!0):"Token{"+c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,!0)+"}"}}]),t}(f.Node)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SymbolToken=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),s=n(6),c=n(0),f=t.SymbolToken=function(e){function t(e){if(r(this,t),!(e instanceof Object))throw new TypeError('"initialProperties" isn\'t an Object instance');var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(e.symbol){if(!(e.symbol instanceof s.Symbol))throw new TypeError('"initialProperties.symbol" isn\'t a Symbol instance');Object.defineProperty(n,"symbol",{value:e.symbol,enumerable:!0})}else{if("string"!=typeof e.pattern)throw new TypeError('"initialProperties.pattern" isn\'t a string');Object.defineProperty(n,"pattern",{value:e.pattern})}return n}return i(t,e),a(t,[{key:"toString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="",n=0,r=this.pattern,o=r.length,i=0;i<o;++i){var a=r[i];if("#"===a){++i;var u=this.childNode(n++);t+=u?u.toString(!0):"??"}else t+=a}return e?t:"SymbolToken"+(this.symbol?"":"[?]")+"{"+t+"}"}},{key:"lexeme",get:function(){return this.symbol?this.symbol.lexeme:void 0}},{key:"pattern",get:function(){return(0,c.mustNotBeUndefined)(this.symbol).pattern}}]),t}(u.Token);Object.defineProperties(f.prototype,{symbol:{value:void 0,enumerable:!0}}),Object.defineProperties(f.prototype,{pattern:{enumerable:!0}})},function(e,t,n){"use strict";function r(e){return s.hasOwnProperty(e)}function o(e,t){if(!r(e))throw new Error(t);return e}function i(e){if(!(0,u.isString)(e))return!1;switch(e){case"Paragraph":case"Math":case"LR":return!0;default:return!1}}function a(e,t){if(!i(e))throw new Error(t);return e}Object.defineProperty(t,"__esModule",{value:!0}),t.modes=void 0,t.isKirillMode=r,t.mustBeKirillMode=o,t.isLatexMode=i,t.mustBeLatexMode=a;var u=n(0),s=t.modes={LIST:"LIST",MATH:"MATH",PICTURE:"PICTURE",TABLE:"TABLE",TEXT:"TEXT",VERTICAL:"VERTICAL"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e instanceof f}Object.defineProperty(t,"__esModule",{value:!0}),t.Environment=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)};t.isEnvironment=a;var c=n(7),f=t.Environment=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(void 0===e)return o(n);if(void 0!==e.name){if("string"!=typeof e.name)throw new TypeError('"initialProperties.name" isn\'t a string');Object.defineProperty(n,"name",{value:e.name})}return n}return i(t,e),u(t,[{key:"equals",value:function(e){return e instanceof t&&(!!s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"equals",this).call(this,e)&&this.name===e.name)}}]),t}(c.Item);Object.defineProperties(f.prototype,{name:{value:"",enumerable:!0}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e instanceof l}function u(e){if(!a(e))throw new Error;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.Command=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)};t.isCommand=a,t.mustBeCommand=u;var f=n(6),l=t.Command=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(void 0===e)return o(n);if(void 0!==e.name){if("string"!=typeof e.name)throw new TypeError('"initialProperties.name" isn\'t a string');Object.defineProperty(n,"name",{value:e.name})}return n}return i(t,e),s(t,[{key:"equals",value:function(e){return e instanceof t&&(!!c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"equals",this).call(this,e)&&this.name===e.name)}}]),t}(f.Symbol);Object.defineProperties(l.prototype,{name:{value:"",enumerable:!0}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Symbol=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(18),f=n(7),l=n(11),p=n(0),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(void 0===e)return o(n);if(void 0!==e.operations){if(!(e.operations instanceof Array))throw new TypeError('"initialProperties.operations" isn\'t an Array instance');Object.defineProperty(n,"operations_",{value:e.operations.map(function(e){return new l.Operation((0,l.mustBeOperationProperties)(e))})})}if(void 0!==e.parameters){if(!(e.parameters instanceof Array))throw new TypeError('"initialProperties.parameters" isn\'t an Array instance');n.parameters_=e.parameters.map(function(e){return new c.Parameter((0,c.mustBeParameterProperties)(e))})}if(void 0!==e.pattern){if("string"!=typeof e.pattern)throw new TypeError('"initialProperties.pattern" isn\'t a string');var i=e.pattern.match(/([ \t]+|#\d+|[^ \t#]+)/g);i&&(n.patternComponents_=i.map(function(e){switch(e[0]){case" ":case"\t":return;case"#":var t=Number(e.substring(1))-1;if(!n.parameters_[t])throw new TypeError('"initialProperties.pattern" contains the incorrect parameter number '+e.substring(1));return t;default:return e}}))}if(void 0!==e.html){if("string"!=typeof e.html)throw new TypeError('"initialProperties.html" isn\'t a string');Object.defineProperty(n,"html",{value:e.html,enumerable:!0})}return n}return i(t,e),u(t,[{key:"parameter",value:function(e){return this.parameters_[e]||void 0}},{key:"equals",value:function(e){return e instanceof t&&(!!s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"equals",this).call(this,e)&&(this.operations_.length===e.operations_.length&&(!!this.operations_.every(function(t,n){return t.equals(e.operations_[n])})&&(this.parameters_.length===e.parameters_.length&&(!!this.parameters_.every(function(t,n){return t.equals(e.parameters_[n])})&&this.html===e.html)))))}},{key:"operations",get:function(){return this.operations_.slice()}},{key:"parameters",get:function(){return this.parameters_.slice()}},{key:"patternComponents",get:function(){return(0,p.mustNotBeUndefined)(this.patternComponents_.slice())}},{key:"pattern",get:function(){return this.patternComponents_.map(function(e){if((0,p.isNumber)(e))return"#"+(e+1);switch(void 0===e?"undefined":a(e)){case"string":return e;default:return" "}}).join("")}}]),t}(f.Item);t.Symbol=d,Object.defineProperties(d.prototype,{operations:{enumerable:!0},parameters:{enumerable:!0},patternComponents:{enumerable:!0},pattern:{enumerable:!0}}),Object.defineProperties(d.prototype,{operations_:{value:[],enumerable:!1,writable:!0},parameters_:{value:[],enumerable:!1,writable:!0},patternComponents_:{value:[],enumerable:!1,writable:!0},html:{value:"",enumerable:!0,writable:!0}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Item=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(10),a=n(3),u=n(0),s=t.Item=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,e),void 0!==t){if(!(t instanceof Object))throw new TypeError('"initialProperties" isn\'t an Object instance');switch(t.lexeme){case void 0:break;default:var n=i.Lexeme[t.lexeme];if(void 0===n)throw new TypeError('"initialProperties.lexeme" isn\'t a Lexeme option');Object.defineProperty(this,"lexeme",{value:n})}if(void 0!==t.modes){if(!(t.modes instanceof Object))throw new TypeError('"initialProperties.modes" isn\'t an Object instance');Object.defineProperty(this,"modes",{value:{}});for(var o in t.modes){var u=(0,a.mustBeKirillMode)(o);if(void 0===u)throw new TypeError('"initialProperties.modes['+o+"]\" isn't a Mode option");Object.defineProperty(this.modes,u,{value:t.modes[o],enumerable:!0})}}}}return o(e,[{key:"equals",value:function(t){return t instanceof e&&(this.lexeme===t.lexeme&&(0,u.testProperties)(this.modes,t.modes,a.modes,!1))}}]),e}();Object.defineProperties(s.prototype,{lexeme:{value:void 0,enumerable:!0},modes:{value:{},enumerable:!0}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e&&e instanceof l}Object.defineProperty(t,"__esModule",{value:!0}),t.CommandToken=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)};t.isCommandToken=a;var c=n(5),f=n(2),l=t.CommandToken=function(e){function t(e){if(r(this,t),!(e instanceof Object))throw new TypeError('"initialProperties" isn\'t an Object instance');var n=Object.create(e);if(e.command){if(!(e.command instanceof c.Command))throw new TypeError('"initialProperties.command" isn\'t a LatexStyle.Command instance');n.symbol=e.command;var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.command=(0,c.mustBeCommand)(e.command),i.name=i.command.name}else{if("string"!=typeof e.name)throw new TypeError('"initialProperties.name" isn\'t a string');n.pattern="";var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.name=e.name}return o(i)}return i(t,e),u(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n="\\"+this.name+s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,!0);return e?n:"CommandToken"+((0,c.isCommand)(this.symbol)?"":"[?]")+"{"+n+"}"}}]),t}(f.SymbolToken)},function(e,t,n){"use strict";function r(e){return e===o}Object.defineProperty(t,"__esModule",{value:!0}),t.isGROUP=r;var o=t.GROUP="GROUP"},function(e,t,n){"use strict";function r(e){return i.hasOwnProperty(e)}function o(e,t){if(!r(e))throw new Error(t);return e}Object.defineProperty(t,"__esModule",{value:!0}),t.isLexeme=r,t.mustBeLexeme=o;var i=t.Lexeme={CELL_SEPARATOR:"CELL_SEPARATOR",BRACKETS:"BRACKETS",BINARY_OPERATOR:"BINARY_OPERATOR",CHAR:"CHAR",DIGIT:"DIGIT",DIRECTIVE:"DIRECTIVE",DISPLAY_EQUATION:"DISPLAY_EQUATION",FILE_PATH:"FILE_PATH",FLOATING_BOX:"FLOATING_BOX",HORIZONTAL_SKIP:"HORIZONTAL_SKIP",INLINE_EQUATION:"INLINE_EQUATION",LABEL:"LABEL",LENGTH:"LENGTH",LETTER:"LETTER",LINE_BREAK:"LINE_BREAK",NUMBER:"NUMBER",LIST:"LIST",LIST_ITEM:"LIST_ITEM",PARAGRAPH_SEPARATOR:"PARAGRAPH_SEPARATOR",PICTURE:"PICTURE",POST_OPERATOR:"POST_OPERATOR",PRE_OPERATOR:"PRE_OPERATOR",RAW:"RAW",SPACE:"SPACE",SUBSCRIPT:"SUBSCRIPT",SUPERSCRIPT:"SUPERSCRIPT",TABLE:"TABLE",TABULAR_PARAMETERS:"TABULAR_PARAMETERS",TAG:"TAG",UNKNOWN:"UNKNOWN",VERTICAL_SKIP:"VERTICAL_SKIP",WORD:"WORD",WRAPPER:"WRAPPER"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return e&&e.hasOwnProperty("directive")&&(0,u.isDirective)(e.directive)&&e.hasOwnProperty("operand")&&((0,c.isKirillMode)(e.operand)||(0,s.isGROUP)(e.operand))}function i(e){if(!o(e))throw new Error;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.Operation=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.isOperationProperties=o,t.mustBeOperationProperties=i;var u=n(16),s=n(9),c=n(3);t.Operation=function(){function e(t){if(r(this,e),void 0!==t){if(!(t instanceof Object))throw new TypeError('"initialProperties" isn\'t an Object instance');var n=u.Directive[t.directive];if(!n)throw new TypeError('"initialProperties.directive" isn\'t an Latex.Directive option');switch(Object.defineProperty(this,"directive",{value:n,enumerable:!0}),t.operand){case s.GROUP:Object.defineProperty(this,"operand",{value:s.GROUP,enumerable:!0});break;default:var o=c.modes[t.operand];if(!o)throw new TypeError('"initialProperties.operand" isn\'t an Latex.KirillMode option');Object.defineProperty(this,"operand",{value:o,enumerable:!0})}}}return a(e,[{key:"equals",value:function(t){return t instanceof e&&(this.directive===t.directive&&this.operand===t.operand)}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3);t.State=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),Object.defineProperty(this,"modeStates_",{value:{},enumerable:!1}),this.modeStates_[i.modes.LIST]=!1,this.modeStates_[i.modes.MATH]=!1,this.modeStates_[i.modes.PICTURE]=!1,this.modeStates_[i.modes.TABLE]=!1,this.modeStates_[i.modes.TEXT]=!0,this.modeStates_[i.modes.VERTICAL]=!1,void 0!==t&&this.update(t)}return o(e,[{key:"copy",value:function(){return new e(this.modeStates_)}},{key:"update",value:function(e){for(var t in e){var n=i.modes[(0,i.mustBeKirillMode)(t)];if(void 0===n)throw new TypeError('"modeStates['+t+"]\" isn't a Latex.KirillMode option");this.modeStates_[n]=e[t]}}},{key:"test",value:function(e){for(var t in e){var n=i.modes[(0,i.mustBeKirillMode)(t)];if(void 0===n)throw new TypeError('"modeStates['+t+"]\" isn't a Latex.KirillMode option");if(this.modeStates_[n]!==e[t])return!1}return!0}}]),e}()},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0);t.Node=function(){function e(t){if(o(this,e),this.childNodes_=[],void 0!==t){(0,a.mustBeObject)(t,"initialProperties isn't an Object instance"),void 0!==t.childNodes&&((0,a.mustBeArray)(t.childNodes,"initialProperties.childNodes isn't an Array instance"),t.childNodes.forEach(this.insertChildSubtree,this));var n=t.parentNode;if(void 0!==n){if(!n)throw new TypeError("initialProperties.parentNode isn't a SyntaxTree.Node instance");n.insertChildSubtree(this)}}}return i(e,[{key:"childNode",value:function(t){if((0,a.isNumber)(t))return this.childNodes_[t]||void 0;if(t instanceof e)return t.parentNode===this?t:void 0;throw new TypeError('"node" is neither a number nor a SyntaxTree.Node instance')}},{key:"childIndex",value:function(t){if((0,a.isNumber)(t))return this.childNodes_[t]?t:void 0;if(t instanceof e)return t.parentNode===this?this.childNodes_.indexOf(t):void 0;throw new TypeError('"node" is neither a number nor a SyntaxTree.Node instance')}},{key:"insertChildNode",value:function(t,n,r){if(!(t instanceof e))throw new TypeError('"node" isn\'t a SyntaxTree.Node instance');if(t.parentNode)throw new TypeError('"node" has a parent');if(t.tree)throw new TypeError('"node" is a tree root');if(t.childNodes_.length)throw new TypeError('"node" has child nodes');this.hasOwnProperty("childNodes_")||(this.childNodes_=[]),void 0===n&&(n=this.childNodes_.length),void 0===r&&(r=0);var o=this.childNodes_.splice(n,r,t);this.subtreeSize=this.subtreeSize+1;for(var i=this.parentNode;i;i=i.parentNode)i.subtreeSize=i.subtreeSize+1;if(Object.defineProperty(t,"parentNode",{value:this,enumerable:!0,configurable:!0}),o.length){Object.defineProperty(t,"childNodes_",{value:o,configurable:!0});var a=1;o.forEach(function(e){a+=e.subtreeSize}),Object.defineProperty(t,"subtreeSize",{value:a,enumerable:!0,configurable:!0})}return t}},{key:"insertChildSubtree",value:function(t,n){if(!(t instanceof e))throw new TypeError('"node" isn\'t a SyntaxTree.Node instance');if(t.parentNode)throw new TypeError('"node" has a parent');if(t.tree)throw new TypeError('"node" is a tree root');this.hasOwnProperty("childNodes_")||Object.defineProperty(this,"childNodes_",{value:[],configurable:!0}),void 0===n&&(n=this.childNodes_.length),this.childNodes_.splice(n,0,t);var r=t.subtreeSize;Object.defineProperty(this,"subtreeSize",{value:this.subtreeSize+r,enumerable:!0,configurable:!0});for(var o=this.parentNode;o;o=o.parentNode)Object.defineProperty(o,"subtreeSize",{value:o.subtreeSize+r});Object.defineProperty(t,"parentNode",{value:this,enumerable:!0,configurable:!0})}},{key:"removeChildNode",value:function(e){var t,n=this.childIndex(e);if(void 0!==n){var o=this.childNodes_[n];(t=this.childNodes_).splice.apply(t,[n,1].concat(r(o.childNodes_))),this.childNodes_.length?this.subtreeSize=this.subtreeSize-1:(delete this.childNodes_,delete this.subtreeSize);for(var i=this.parentNode;i;i=i.parentNode)i.subtreeSize=i.subtreeSize-1;return delete o.parentNode,delete o.childNodes_,delete o.subtreeSize,o}}},{key:"removeChildSubtree",value:function(e){var t=this.childIndex(e);if(void 0!==t){var n=(0,a.mustNotBeUndefined)(this.childNodes_.splice(t,1)[0]),r=n.subtreeSize;this.childNodes_.length?Object.defineProperty(this,"subtreeSize",{value:this.subtreeSize-r}):(delete this.childNodes_,delete this.subtreeSize);for(var o=this.parentNode;o;o=o.parentNode)Object.defineProperty(o,"subtreeSize",{value:o.subtreeSize-r});return delete n.parentNode,n}}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="";return this.childNodes_.forEach(function(e){t+=e.toString(!0)}),e?t:"SourceTree.Node{"+t+"}"}},{key:"childNodes",get:function(){return this.childNodes_.slice()}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){if((0,p.isCommandToken)(e.beginCommandToken))return e.beginCommandToken}function u(e){if((0,p.isCommandToken)(e.endCommandToken))return e.endCommandToken}function s(e){if(e.environment&&(0,d.isEnvironment)(e.environment))return e.environment}Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentBodyToken=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},l=n(1),p=n(8),d=n(4),y=n(15),b=t.EnvironmentBodyToken=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"toString",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,!0):"EnvironmentBodyToken{"+f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,!0)+"}"}},{key:"environment",get:function(){return this.parentNode&&s(this.parentNode)}},{key:"environmentToken",get:function(){return this.parentNode&&(0,y.mustBeEnvironmentToken)(this.parentNode)}},{key:"beginCommandToken",get:function(){return this.parentNode&&a(this.parentNode)}},{key:"endCommandToken",get:function(){return this.parentNode&&u(this.parentNode)}}]),t}(l.Token);Object.defineProperties(b.prototype,{parentNodeClass_:{value:y.EnvironmentToken}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){if(!u(e))throw new Error;return e}function u(e){return e instanceof y}Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentToken=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.mustBeEnvironmentToken=a,t.isEnvironmentToken=u;var c=n(1),f=n(4),l=n(8),p=n(14),d=n(2),y=t.EnvironmentToken=function(e){function t(e){if(r(this,t),!(e instanceof Object))throw new TypeError('"initialProperties" isn\'t an Object instance');var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(!(e.environment instanceof f.Environment))throw new TypeError('"initialProperties.environment" isn\'t a LatexStyle.Environment instance');return Object.defineProperty(n,"environment",{value:e.environment,enumerable:!0}),n}return i(t,e),s(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.beginCommandToken,n=this.endCommandToken,r=this.bodyToken,o="\\begin{"+this.environment.name+"}";return o+=t?d.SymbolToken.prototype.toString.call(t,!0):"??",o+=r?r.toString(!0):"??",o+="\\end{"+this.environment.name+"}",o+=n?d.SymbolToken.prototype.toString.call(n,!0):"??",e?o:"EnvironmentToken{"+o+"}"}},{key:"lexeme",get:function(){return this.environment.lexeme}},{key:"beginCommandToken",get:function(){var e=this.childNode(0);return e instanceof l.CommandToken?e:void 0}},{key:"endCommandToken",get:function(){var e=this.childNode(2);return e instanceof l.CommandToken?e:void 0}},{key:"bodyToken",get:function(){var e=this.childNode(1);return e instanceof p.EnvironmentBodyToken?e:void 0}}]),t}(c.Token);Object.defineProperties(y.prototype,{beginToken:{enumerable:!0},endToken:{enumerable:!0}})},function(e,t,n){"use strict";function r(e){return o.hasOwnProperty(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isDirective=r;var o=t.Directive={BEGIN:"BEGIN",END:"END"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(12),a=n(9),u=n(0);t.Context=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r(this,e),this.source=t,this.position=0,this.lineNumber=0,this.charNumber=0,this.currentToken=void 0,this.currentState=new i.State,this.stateStack=[],this.comments=[]}return o(e,[{key:"copy",value:function(t){var n=t||new e;return n.source=this.source,n.position=this.position,n.lineNumber=this.lineNumber,n.charNumber=this.charNumber,n.currentToken=this.currentToken,n.currentState=this.currentState.copy(),n.stateStack=this.stateStack.slice(),n.comments=this.comments.slice(),n}},{key:"updateState",value:function(e){var t=this;if(!(e instanceof Array))throw new TypeError('"operations" isn\'t an Array instance');var n={};e.forEach(function(e){switch(e.directive){case"BEGIN":switch(e.operand){case"GROUP":t.currentState.update(n),n={},t.stateStack.push(t.currentState.copy());break;default:n[e.operand]=!0}break;case"END":switch(e.operand){case a.GROUP:if(n={},t.stateStack.length<1)throw new Error("state stack is empty");t.currentState=(0,u.mustNotBeUndefined)(t.stateStack.pop());break;default:n[e.operand]=!1}break;default:throw new Error}}),this.currentState.update(n)}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return!0}function u(e){if(!a)throw new Error;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.Parameter=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)};t.isParameterProperties=a,t.mustBeParameterProperties=u;var f=n(7),l=n(11),p=t.Parameter=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(void 0===e)return o(n);if(void 0!==e.operations){if(!(e.operations instanceof Array))throw new TypeError('"initialProperties.operations" isn\'t an Array instance');Object.defineProperty(n,"operations_",{value:e.operations.map(function(e){return new l.Operation(e)})})}return n}return i(t,e),s(t,[{key:"equals",value:function(e){return e instanceof t&&(!!c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"equals",this).call(this,e)&&(this.operations_.length===e.operations_.length&&this.operations_.every(function(t,n){return t.equals(e.operations_[n])})))}},{key:"operations",get:function(){return this.operations_.slice()}}]),t}(f.Item);Object.defineProperties(p.prototype,{operations:{enumerable:!0}}),Object.defineProperties(p.prototype,{operations_:{value:[],enumerable:!1}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LatexStyle=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),a=n(4),u=n(6),s=n(0),c=n(12);t.LatexStyle=function(){function e(){r(this,e),this.symbols_={},this.commands_={},this.environments_={}}return o(e,[{key:"loadPackage",value:function(e,t){if(void 0!==t.symbols){if(!(t.symbols instanceof Array))throw new TypeError('"stylePackage.symbols" isn\'t an Array');for(var n=t.symbols.length-1;n>=0;--n){var r=new u.Symbol(t.symbols[n]);if(r.pattern){var o=r.pattern[0];this.symbols_.hasOwnProperty(o)||(this.symbols_[o]=[]);this.symbols_[o].push({symbol:r,packageName:e})}}}if(void 0!==t.commands){if(!(t.commands instanceof Array))throw new TypeError('"stylePackage.commands" isn\'t an Array');for(var s=t.commands.length-1;s>=0;--s){var c=new i.Command(t.commands[s]);c.name&&(this.commands_[c.name]||(this.commands_[c.name]=[])).push({command:c,packageName:e})}}if(void 0!==t.environments){if(!(t.environments instanceof Array))throw new TypeError('"stylePackage.environments" isn\'t an Array');for(var f=t.environments.length-1;f>=0;--f){var l=new a.Environment(t.environments[f]),p=l.name;if(p){var d=this.environments_[p];void 0===d&&(d=[],this.environments_[p]=d),d.push({environment:l,packageName:e})}}}}},{key:"unloadPackage",value:function(e){for(var t in this.symbols_)if(this.symbols_.hasOwnProperty(t)){var n=(0,s.mustBeArray)(this.symbols_[t]).filter(function(t){return t.packageName!==e});n.length?this.symbols_[t]=n:delete this.symbols_[t]}for(var r in this.commands_)if(this.commands_.hasOwnProperty(r)){var o=(0,s.mustBeArray)(this.commands_[r]).filter(function(t){return t.packageName!==e});o.length?this.commands_[r]=o:delete this.commands_[r]}for(var i in this.environments_)if(this.environments_.hasOwnProperty(i)){var a=(0,s.mustBeArray)(this.environments_[i]).filter(function(t){return t.packageName!==e});a.length?this.environments_[i]=a:delete this.environments_[i]}}},{key:"symbols",value:function(e,t){if(!(e instanceof c.State))throw new SyntaxError('"state" isn\'t a State instance');var n=this.symbols_[t];if(void 0===n)return[];for(var r=[],o=(0,s.mustBeArray)(n).length-1;o>=0;--o){var i=n[o].symbol;e.test(i.modes)&&r.push(i)}return r}},{key:"commands",value:function(e,t){if(!(e instanceof c.State))throw new SyntaxError('"state" isn\'t a State instance');var n=this.commands_[t];if(!n)return[];for(var r=[],o=(0,s.mustBeArray)(n).length-1;o>=0;--o){var i=n[o].command;e.test(i.modes)&&r.push(i)}return r}},{key:"environments",value:function(e,t){if(!(e instanceof c.State))throw new SyntaxError("state isn't State instance");var n=this.environments_[t];return n?(0,s.mustBeArray)(n).filter(function(t){return e.test(t.modes)}):[]}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ParameterToken=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},s=n(2),c=n(1),f=n(0),l=t.ParameterToken=function(e){function t(e){if(r(this,t),!(e instanceof Object))throw new TypeError('"initialProperties" isn\'t an Object instance');var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e.hasBrackets||Object.defineProperty(n,"hasBrackets",{value:!1,enumerable:!0}),e.hasSpacePrefix&&Object.defineProperty(n,"hasSpacePrefix",{value:!0,enumerable:!0}),n}return i(t,e),a(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.hasSpacePrefix?" ":"";return n+=this.hasBrackets?"{"+u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,!0)+"}":u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toString",this).call(this,!0),e?n:"ParameterToken{"+n+"}"}},{key:"lexeme",get:function(){if(this.parameter&&this.parameter.lexeme)return this.parameter.lexeme}},{key:"parameter",get:function(){var e=this.parentNode,t=(0,f.mustNotBeUndefined)(e.symbol),n=e.childIndex(this);if(void 0!==e&&void 0!==n&&n>=0)return t.parameter(n)}}]),t}(c.Token);Object.defineProperties(l.prototype,{hasBrackets:{value:!0,enumerable:!0},hasSpacePrefix:{value:!1,enumerable:!0},parentNodeClass_:{value:s.SymbolToken}}),Object.defineProperties(l.prototype,{parameter:{enumerable:!0}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SpaceToken=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1);t.SpaceToken=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n.lineBreakCount=0,void 0!==e&&void 0!==e.lineBreakCount){if(!isFinite(e.lineBreakCount)||e.lineBreakCount<0)throw new TypeError('"initialProperties.lineBreakCount" isn\'t a non-negative number');n.lineBreakCount=e.lineBreakCount}return n}return i(t,e),a(t,[{key:"toString",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])switch(this.lineBreakCount){case 0:return" ";case 1:return"\n";default:return"\n\n"}else switch(this.lineBreakCount){case 0:return"SpaceToken{ }";case 1:return"SpaceToken{\n}";default:return"SpaceToken{\n\n}"}}},{key:"lexeme",get:function(){return this.lineBreakCount<=1?"SPACE":"PARAGRAPH_SEPARATOR"}}]),t}(u.Token)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SyntaxTree=void 0;var o=n(13),i=n(0);t.SyntaxTree=function e(t,n){if(r(this,e),!(t instanceof o.Node))throw new TypeError('"rootNode" isn\'t a SyntaxTree.Node instance');if(t.parentNode)throw new TypeError('"rootNode" has a parent node');if(t.tree)throw new TypeError('"rootNode" is a tree root');this.rootNode=t,this.source=(0,i.mustBeString)(n,'"sources" isn\'t a string'),t.tree=this}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var n=y(e);if(!n){if(e.position>=e.source.length)return;var r=e.copy();if(!((n=a(e,t))||(r.copy(e),(n=u(e,t))||(r.copy(e),n=s(e,t)))))return}return d(e,n),n}function i(e,t,n,r){var i=e.currentToken;if(e.updateState(n.operations),void 0===r){var a=void 0!==y(e);if("{"===e.source[e.position]){if(e.currentToken=new g.ParameterToken({hasBrackets:!0,hasSpacePrefix:a}),++e.position,++e.charNumber,!l(e,t,"}",n.lexeme))return;++e.position,++e.charNumber}else if(e.currentToken=new g.ParameterToken({hasBrackets:!1,hasSpacePrefix:a}),void 0===o(e,t))return}else if(e.currentToken=new g.ParameterToken({hasBrackets:!1,hasSpacePrefix:!1}),!l(e,t,r,n.lexeme))return;var u=e.currentToken;return e.currentToken=i,d(e,u),u}function a(e,t){if(0===e.source.substring(e.position).indexOf("\\begin")){e.position+=6,y(e);var n=e.source.substring(e.position).match(/^{([\w@]+\*?)}/);if(n){var r=n[1];e.position+=n[0].length,e.charNumber+=n[0].length;var o=e.currentToken,i=t.environments(e.currentState,r)[0],a=e.currentToken=i?new v.EnvironmentToken({environment:i.environment}):new v.EnvironmentToken({name:r}),u=t.commands(e.currentState,r),s=c(e,t,u);void 0===s&&(s=new j.CommandToken({name:r})),d(e,s);var f=e.currentToken=new O.EnvironmentBodyToken,p=l(e,t,"\\end{"+r+"}");e.currentToken=a,d(e,f);var b=void 0;return p&&(e.position+=r.length+6,e.charNumber+=r.length+6,b=c(e,t,t.commands(e.currentState,"end"+r))),void 0===b&&(b=new j.CommandToken({name:"end"+r})),d(e,b),e.currentToken=o,a}}}function u(e,t){var n=e.source.substring(e.position).match(/^\\((?:[\w@]+\*?)|(?:[^\w]))/);if(n){e.position+=n[0].length,e.charNumber+=n[0].length;var r=c(e,t,t.commands(e.currentState,n[1]));return void 0===r&&(r=new j.CommandToken({name:n[1]})),r}}function s(e,t){var n=e.source[e.position],r=c(e,t,t.symbols(e.currentState,n));return void 0===r&&(++e.position,++e.charNumber,r=new P.SymbolToken({pattern:n})),r}function c(e,t,n){var r=e.copy(),o=void 0;return n.some(function(n){return!!(o=f(e,t,n))||(r.copy(e),!1)}),o}function f(e,t,n){var r=e.currentToken;e.currentToken=n instanceof _.Command?new j.CommandToken({command:n}):new P.SymbolToken({symbol:n});for(var o=n.patternComponents,a=o.length,u=0;u<a;++u){var s=o[u];if((0,T.isNumber)(s)){var c=n.parameter(s),f=o[u+1];if("string"==typeof f){if(i(e,t,(0,T.mustNotBeUndefined)(c),f)){if(0!==e.source.substring(e.position).indexOf(f))return;e.position+=f.length,e.charNumber+=f.length,++u;continue}}else if(i(e,t,(0,T.mustNotBeUndefined)(c)))continue}else if((0,T.isString)(s)){for(;p(e););if(0===e.source.substring(e.position).indexOf(s)){e.position+=s.length,e.charNumber+=s.length;continue}}else if(y(e))continue;break}if(!(u<a)){var l=e.currentToken;return e.currentToken=r,e.updateState(n.operations),l}}function l(e,t,n,r){for(;0!==e.source.substring(e.position).indexOf(n);){if(e.position>=e.source.length)return!1;o(e,t)}return!0}function p(e){var t=e.source.substring(e.position).match(/^%([^\n]*)(\n[ \t]*)?/);return!!t&&(e.comments.push(t[1]),e.position+=t[0].length,t[2]?(++e.lineNumber,e.charNumber=t[2].length-1):e.charNumber+=t[0].length,!0)}function d(e,t){e.currentToken&&e.currentToken.insertChildSubtree(t)}function y(e){for(var t=!1,n=0;e.position<e.source.length;)if(!p(e)){switch(e.source[e.position]){case" ":case"\t":t=!0,++e.position,++e.charNumber;continue;case"\n":t=!0,++n,++e.position,++e.lineNumber,e.charNumber=0;continue}break}return t?new w.SpaceToken({lineBreakCount:n}):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.LatexParser=void 0;var b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(17),m=n(19),v=n(15),O=n(14),_=n(5),w=n(21),P=n(2),g=n(20),j=n(8),T=n(0);t.LatexParser=function(){function e(t){if(r(this,e),!(t instanceof m.LatexStyle))throw new TypeError('"latexStyle" isn\'t a LatexStyle instance');this.latexStyle=t}return b(e,[{key:"parse",value:function(e,t){if("string"!=typeof e)throw new TypeError('"sources" isn\'t a string');var n=void 0;if(void 0===t)n=new h.Context(e);else{if(!(t instanceof h.Context))throw new TypeError('"context" isn\'t a LatexParser.Context instance');n=t,n.source+=e}for(var r=[],i=void 0;i=o(n,this.latexStyle);)r.push(i);return r}}]),e}()},function(e,t,n){"use strict";function r(e){if(!o(e))throw new Error("Invalid format for PackageProperties");return e}function o(e){return!Object.keys(e).some(function(e){switch(e){case"symbols":case"commands":case"environments":return!1;default:return!0}})}Object.defineProperty(t,"__esModule",{value:!0}),t.mustBePackageProperties=r,t.isPackageProperties=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.LatexTree=void 0;var a=n(22),u=n(1);t.LatexTree=function(e){function t(e,n){r(this,t);var i=(0,u.mustBeToken)(e,'"rootToken" isn\'t a Token instance');return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,n))}return i(t,e),t}(a.SyntaxTree)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SourceToken=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),s=n(10),c=n(0);t.SourceToken=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.lexeme=(0,s.mustBeLexeme)(e.lexeme,'"initialProperties.lexeme" isn\'t known'),n.source=(0,c.mustBeString)(e.source,'"initialProperties.sources" isn\'t a string'),n}return i(t,e),a(t,[{key:"toString",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.source:"SourceToken["+this.lexeme+"]{"+this.source+"}"}}]),t}(u.Token)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(10);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n(3);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n(11);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var u=n(12);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var s=n(16);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var c=n(9);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var f=n(23);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}})});var l=n(17);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var p=n(19);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}})});var d=n(24);Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}})});var y=n(7);Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}})});var b=n(4);Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}})});var h=n(18);Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}})});var m=n(6);Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}})});var v=n(5);Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}})});var O=n(22);Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return O[e]}})});var _=n(25);Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}})});var w=n(13);Object.keys(w).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}})});var P=n(1);Object.keys(P).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}})});var g=n(8);Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}})});var j=n(14);Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return j[e]}})});var T=n(15);Object.keys(T).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return T[e]}})});var E=n(20);Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}})});var k=n(26);Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return k[e]}})});var S=n(21);Object.keys(S).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return S[e]}})});var N=n(2);Object.keys(N).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return N[e]}})})}])});
//# sourceMappingURL=latex-parser.min.js.map