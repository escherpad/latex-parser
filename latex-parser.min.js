!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["latex-parser"]=t():e["latex-parser"]=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){"use strict";function n(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{writable:!0,enumerable:!0,configurable:!0};if(!(e instanceof Object))throw new TypeError('"target" isn\'t an Object instance');if(void 0!==t){if(!(t instanceof Object))throw new TypeError('"properties" isn\'t an Object instance');if(void 0===n)n={writable:!0,enumerable:!0,configurable:!0};else if(!(n instanceof Object))throw new TypeError('"attributes" isn\'t an Object instance');if(void 0===r)for(var u in t)void 0!==t[u]&&Object.defineProperty(e,u,Object.create(n,{value:{value:t[u]}}));else if(r instanceof Array)r.forEach(function(r){void 0!==t[r]&&Object.defineProperty(e,r,Object.create(n,{value:{value:t[r]}}))});else{if(!(r instanceof Object))throw new TypeError('"keys" isn\'t an Object instance');for(var o in r){var i=r[o];void 0!==t[i]&&Object.defineProperty(e,o,Object.create(n,{value:{value:t[i]}}))}}}}function u(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!(e instanceof Object))throw new TypeError('"target" isn\'t an Object instance');if(void 0===t)return!0;if(!(t instanceof Object))throw new TypeError('"properties" isn\'t an Object instance');if(void 0===n&&(n=!0),void 0===r){for(var u in t)if(e[u]!==t[u]&&(void 0!==t[u]||!n))return!1}else{if(r instanceof Array)return r.every(function(r){return e[r]===t[r]||void 0===t[r]&&n});if(!(r instanceof Object))throw new TypeError('"keys" isn\'t an Object instance');for(var o in r){var i=r[o];if(e[o]!==t[i]&&(void 0!==t[i]||!n))return!1}}return!0}function o(e){return"number"==typeof e}function i(e){return"string"==typeof e}function a(e,t){if(!e)throw new Error(t);return e}function c(e,t){if(!(e instanceof Object))throw new TypeError(t||"Expected Object");return e}function s(e,t){if("string"!=typeof e)throw new TypeError(t||"Expected string");return e}function f(e,t){if(!l(e))throw new TypeError(t||"Expected Array");return e}function l(e){return!!e&&e.constructor===Array}function p(e,t){return[].concat.apply([],e.map(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.updateProperties=n,t.testProperties=u,t.isNumber=o,t.isString=i,t.mustNotBeUndefined=a,t.mustBeObject=c,t.mustBeString=s,t.mustBeArray=f,t.isArray=l,t.concatMap=p;t.mustBeNumber=function(e,t){if(!o(e))throw new TypeError(t||"Expected number");return e},t.mconcat=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduceRight(e)},t.snd=function(e){return e[1]}},function(e,t,r){"use strict";function n(e){return o(e)||i(e)}function u(e){return K.hasOwnProperty(e)}function o(e){return u(e.type)&&(0,Z.isNumber)(e.value)}function i(e){return m(e.expression)}function a(e){if(void 0===e)return!1;switch(e){case"Parentheses":case"Square":case"Dollar":return!0;default:return!1}}function c(e,t){return void 0!==e&&(void 0===t?"string"==typeof e.name:t===e.name)}function s(e){return void 0!==e&&"string"==typeof e.text}function f(e){return void 0!==e&&(0,Z.isArray)(e.latex)}function l(e){return e.arguments instanceof Array}function p(e){return e===ne.SUP||e===ne.SUB}function h(e){switch(e){case"#":return"\\#";case"$":return"\\$";case"%":return"\\%";case"^":return"\\^{}";case"&":return"\\&";case"{":return"\\{";case"}":return"\\}";case"~":return"\\~{}";case"\\":return"\\textbackslash{}";case"_":return"\\_{}";default:return e}}function d(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return 0===r.length?"string"==typeof e.type:r.some(function(t){return e.type===t})}function m(e){return y(e)||v(e)}function v(e){return j(e)||x(e)||w(e)||T(e)||O(e)||S(e)||E(e)||M(e)}function y(e){return j(e)||g(e)||w(e)||T(e)||O(e)||S(e)||E(e)||M(e)}function g(e){return void 0!==e&&void 0!==e.type&&s(e)&&d(e,ee)}function x(e){return void 0!==e&&"string"==typeof e.string&&"number"==typeof e.category}function w(e){return c(e)&&l(e)&&d(e,te,re)}function b(e){return w(e)&&0===e.arguments.length}function T(e,t){return d(e,Q)}function O(e){return f(e)&&d(e)&&a(e.type)}function S(e){return void 0!==e&&"boolean"==typeof e.noNewPage&&(void 0===e.measure||n(e.measure))}function A(e){return p(e.type)}function E(e){return f(e)&&d(e,V)}function X(e){return d(e,"FixArg")}function P(e){return d(e,"OptArg")}function M(e){return s(e)&&d(e,Y)}function j(e){return void 0!==e&&0===Object.keys(e).length}function _(e){return{type:"FixArg",latex:e}}function k(e){return 1===e.length?{type:"OptArg",latex:e}:{type:"MOptArg",latex:e}}function B(e){return{type:"SymArg",latex:[e]}}function C(e){return{type:"ParArg",latex:[e]}}function N(e){return{type:"MOptArg",latex:e}}function D(e){return{type:"MSymArg",latex:e}}function q(e){return{type:"MParArg",latex:e}}function R(e){return{name:e,arguments:[],type:re}}function $(e){return{text:e,type:ee,characterCategories:(0,G.convertToTeXCharsDefault)(e)}}function U(e,t,r,n){return{latex:n,type:e,startSymbol:t,endSymbol:r}}function L(e){return{latex:[e],type:V}}function z(e){return{text:e,type:Y}}function F(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return{name:e,arguments:r,type:te}}function H(e,t,r){return{type:e,symbol:t,arguments:r}}function W(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),u=2;u<r;u++)n[u-2]=arguments[u];return{name:e,latex:t,arguments:n,type:Q}}function I(e){var t=[];return J(e,t),t.join("")}function J(e,t){if(w(e))t.push("\\",e.name),e.arguments.forEach(function(e){return J(e,t)});else{if(T(e))throw new Error("not supported yet");if(O(e))t.push(e.startSymbol),e.latex.forEach(function(e){return J(e,t)}),t.push(e.endSymbol);else if(S(e))t.push("\n");else if(A(e))t.push(e.symbol),e.arguments&&e.arguments.forEach(function(e){return J(e,t)});else if(E(e))t.push("{"),e.latex.forEach(function(e){return J(e,t)}),t.push("}");else if(M(e))t.push("%"+e.text+"\n");else if(g(e))t.push(e.text);else{if(x(e))throw new Error("not supported yet");if(X(e))t.push("{"),e.latex.forEach(function(e){return J(e,t)}),t.push("}");else{if(!P(e))throw new Error("Did not recognize "+JSON.stringify(e));t.push("["),e.latex.forEach(function(e){return J(e,t)}),t.push("]")}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.newTeXMathDol=t.protectString=t.fromStringLaTeX=t.SubOrSuperSymbol=t.typeTeXCommS=t.typeTeXComm=t.typeTeXRaw=t.typeTeXComment=t.typeTeXBraces=t.typeTeXEnv=t.typeTeXSeq=t.mathTypes=t.measureTypes=void 0,t.isMeasure=n,t.isMeasureType=u,t.isBuiltInMeasure=o,t.isCustomMeasure=i,t.isMathType=a,t.isNameHaving=c,t.isTextHaving=s,t.isLaTeXHaving=f,t.isArgumentHaving=l,t.isSubOrSuperSymbol=p,t.protectChar=h,t.isTypeHaving=d,t.isLaTeXBlock=m,t.isLaTeXNoRaw=v,t.isLaTeXRaw=y,t.isTeXRaw=g,t.isTeXChar=x,t.isTeXComm=w,t.isTeXCommS=b,t.isTeXEnv=T,t.isTeXMath=O,t.isTeXLineBreak=S,t.isSubOrSuperScript=A,t.isTeXBraces=E,t.isFixArg=X,t.isOptArg=P,t.isTeXComment=M,t.isTeXEmpty=j,t.newFixArg=_,t.newOptArg=k,t.newSymArg=B,t.newParArg=C,t.newMOptArg=N,t.newMSymArg=D,t.newMParArg=q,t.newCommandS=R,t.newTeXRaw=$,t.newTeXMath=U,t.newTeXBraces=L,t.newTeXComment=z,t.newTeXComm=F,t.newSubOrSuperScript=H,t.newTeXEnv=W,t.stringifyLaTeX=I;var Z=r(0),G=r(3),K=t.measureTypes={pt:!0,mm:!0,cm:!0,in:!0,ex:!0,em:!0},Q=(t.mathTypes={Parentheses:"Parentheses",Square:"Square",Dollar:"Dollar"},t.typeTeXSeq="TeXSeq",t.typeTeXEnv="TeXEnv"),V=t.typeTeXBraces="TeXBraces",Y=t.typeTeXComment="TeXComment",ee=t.typeTeXRaw="TeXRaw",te=t.typeTeXComm="TeXComm",re=t.typeTeXCommS="TeXCommS",ne=t.SubOrSuperSymbol=void 0;!function(e){e[e.SUP=0]="SUP",e[e.SUB=1]="SUB"}(ne||(t.SubOrSuperSymbol=ne={}));var ue=(t.fromStringLaTeX=function(e){return $(ue(e))},t.protectString=function(e){for(var t=[],r=0;r<e.length;r++)t.push(h(e.charAt(r)));return t.join()});t.newTeXMathDol=function(e){return U("Dollar","$","$",e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var u=r(1);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var o=r(4);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},function(e,t,r){"use strict";function n(e){return u(o,e)}function u(e,t){for(var r=[],n=0;n<t.length;n++){var u=t.charAt(n);r.push({string:u,category:e(u)})}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.convertToTeXCharsDefault=n,t.convertToTeXChars=u;var o=t.defaultCategories=function(e){switch(e){case"\\":return 0;case"{":return 1;case"}":return 2;case"$":return 3;case"&":return 4;case"\r":return 5;case"#":return 6;case"^":return 7;case"_":return 8;case"\0":return 9;case" ":return 10;case"~":return 13;case"%":return 14;case"d":return 15;default:return 11}}},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){var r=e.length,n=t.length;if(0===r)return t;if(0===n)return e;for(var u={},o=0;o<r;o++)u[e[o]]=!0;for(var i=0;i<n;i++)u[t[i]]=!0;var a=[];for(var c in u)u.hasOwnProperty(c)&&a.push(c);return a.sort(),a}function o(e,t){if(!t)return e;if(e.furthest>t.furthest)return e;var r=e.furthest===t.furthest?u(e.expected,t.expected):t.expected;return{status:e.status,index:e.index,value:e.value,furthest:t.furthest,expected:r}}function i(e,t,r,n){return(0,S.Parser)(function(u,i){for(var a=n,c=0,s=void 0;i<u.length;){var f=t._(u,i);if(f.status){i=(0,E.mustBeNumber)(f.index);break}var l=e._(u,i);if(T(l))return l;if(s=(0,E.mustNotBeUndefined)(o(l,s)),T(s))return s;c++;var p=(0,E.mustNotBeUndefined)(s.value);a=r(a,p),i=(0,E.mustBeNumber)(s.index)}return O(o((0,S.makeSuccess)(i,a),s))})}function a(e,t){return i(e,t,function(e,t){return e.concat([t])},[])}function c(e){return(0,S.Parser)(function(t,r){var n=t.charAt(r);if(r>=t.length||e(n))return(0,S.makeFailure)(r,"text character");var u=[n];r++;for(var o=t.charAt(r);!e(o)&&r<t.length;)u.push(o),r++,o=t.charAt(r);return(0,S.makeSuccess)(r,u.join(""))})}function s(e){return c(l(e)).map(function(e){return(0,A.newTeXRaw)(e)})}function f(e,t){return(void 0===t?$:t).hasOwnProperty(e)}function l(e){return function(t){return e.hasOwnProperty(t)}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"^";switch(e){case"Math":return z(t,r);default:return L}}function h(e){return e>="A"&&e<="Z"}function d(e){return e>="a"&&e<="z"}function m(e){return Z.then(a(p(e,"_"),G)).map(A.newFixArg)}function v(e){return _.then(a(p(e),k)).map(A.newOptArg)}function y(e){return(0,S.alt)(m(e),v(e))}function g(e){return(0,S.alt)((0,S.string)("{}").map(function(){return[]}),y(e).map(function(e){return e}).atLeast(0)).map(function(e){return e})}function x(e){return(0,S.seqMap)(U,(0,S.alt)(I,X(J)),g(e),function(e,t,r){return void 0!==r?A.newTeXComm.apply(void 0,[t].concat(n(r))):(0,A.newTeXComm)(t)}).map(function(e){return e})}function w(e,t,r){return(0,S.seqMap)(K(t,r),g(e),function(e,n){return(0,A.newSubOrSuperScript)(e,e===A.SubOrSuperSymbol.SUB?t:r,n)}).map(function(e){return e})}function b(e){return void 0!==e&&!0===e.status}function T(e){return void 0!==e&&!1===e.status}function O(e){if(!b(e))throw new Error("Expected parse to be success: "+JSON.stringify(e));return e}Object.defineProperty(t,"__esModule",{value:!0}),t.dolMath=t.subOrSuperscriptSymbolParser=t.endCmd=t.specialChar=t.environment=t.env=t.latexParser=t.latexBlockParserMathMode=t.latexBlockParserTextMode=t.commandSymbol=t.mathSymbol=t.specialCharsDefault=t.comment=t.notTextDefaultAndNotClosingBracket=t.notTextMathModeAndNotClosingBracket=t.notTextMathMode=t.notTextDefault=t.takeTill=t.defaultParserConf=void 0,t.textParser=s,t.isSpecialCharacter=f,t.isNotText=l,t.latexBlockParser=p,t.fixArg=m,t.optArg=v,t.cmdArg=y,t.cmdArgs=g,t.command=x,t.shiftedScript=w,t.isOk=b,t.isNotOk=T,t.mustBeOk=O;var S=r(5),A=r(1),E=r(0),X=(t.defaultParserConf={verbatimEnvironments:["verbatim"]},t.takeTill=function(e){return(0,S.takeWhile)(function(t){return!e(t)})}),P=(0,S.regexp)(/[^\n]*/),M=(0,S.regexp)(/\n?/),j=((0,S.regexp)(/\s*/m),(0,S.string)("%")),_=(0,S.string)("["),k=(0,S.string)("]"),B=t.notTextDefault={$:!0,"%":!0,"\\":!0,"{":!0,"]":!0,"}":!0},C=t.notTextMathMode={"^":!0,_:!0,$:!0,"%":!0,"\\":!0,"{":!0,"]":!0,"}":!0},N=t.notTextMathModeAndNotClosingBracket={"^":!0,_:!0,$:!0,"%":!0,"\\":!0,"{":!0,"}":!0},D=t.notTextDefaultAndNotClosingBracket={$:!0,"%":!0,"\\":!0,"{":!0,"}":!0},q=(s(B),s(D),(0,S.regexp)(/ */).map(A.newTeXRaw)),R=t.comment=j.then(P).skip(M).map(A.newTeXComment),$=t.specialCharsDefault={"'":!0,"(":!0,")":!0,",":!0,".":!0,"-":!0,'"':!0,"!":!0,"^":!0,$:!0,"&":!0,"#":!0,"{":!0,"}":!0,"%":!0,"~":!0,"|":!0,"/":!0,":":!0,";":!0,"=":!0,"[":!0,"]":!0,"\\":!0,"`":!0," ":!0},U=(t.mathSymbol=(0,S.string)("$"),t.commandSymbol=(0,S.string)("\\")),L=t.latexBlockParserTextMode=(0,S.lazy)(function(){return(0,S.alt)((0,S.alt)(s(B),Q,R,s(D),W,x("Paragraph")))}),z=t.latexBlockParserMathMode=function(e,t){return(0,S.lazy)(function(){return(0,S.alt)((0,S.alt)(w("Math",e,t),s(C),Q,R,s(N),W,x("Math")))})},F=(t.latexParser=L.many(),(0,S.string)("{").then(L.many()).skip((0,S.string)("}"))),H=t.env=(0,S.Parser)(function(e,t){var r=(0,S.string)("\\begin").then((0,S.string)("{")).then(q).then((0,S.regexp)(/[a-zA-Z]+/)).skip(q).skip((0,S.string)("}"))._(e,t);if(T(r))return r;t=(0,E.mustBeNumber)(r.index);var n=r.value;return a(L,(0,S.string)("\\end").then((0,S.string)("{")).then(q).then((0,S.string)(n)).then(q).then((0,S.string)("}"))).map(function(e){return(0,A.newTeXEnv)(n,e)})._(e,t)}),W=t.environment=(0,S.alt)(F,H),I=t.specialChar=(0,S.test)(f),J=t.endCmd=function(e){return!d(e)&&!h(e)},Z=(0,S.string)("{"),G=(0,S.string)("}"),K=t.subOrSuperscriptSymbolParser=function(e,t){return(0,S.alt)((0,S.string)(e),(0,S.string)(t)).map(function(t){return t===e?A.SubOrSuperSymbol.SUB:A.SubOrSuperSymbol.SUP})},Q=t.dolMath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Dollar",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"$";return(0,S.string)(t).then(p("Math","_").many().map(function(n){return(0,A.newTeXMath)(e,t,r,n)})).skip((0,S.string)(r))}()},function(e,t,r){!function(t,r){e.exports=r()}(0,function(){return function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);this._=e}function u(e){return e instanceof n}function o(e){return"[object Array]"==={}.toString.call(e)}function i(e,t){return{status:!0,index:e,value:t,furthest:-1,expected:[]}}function a(e,t){return{status:!1,index:-1,value:null,furthest:e,expected:[t]}}function c(e,t){if(!t)return e;if(e.furthest>t.furthest)return e;var r=e.furthest===t.furthest?f(e.expected,t.expected):t.expected;return{status:e.status,index:e.index,value:e.value,furthest:t.furthest,expected:r}}function s(e,t){var r=e.slice(0,t).split("\n");return{offset:t,line:r.length,column:r[r.length-1].length+1}}function f(e,t){var r=e.length,n=t.length;if(0===r)return t;if(0===n)return e;for(var u={},o=0;o<r;o++)u[e[o]]=!0;for(var i=0;i<n;i++)u[t[i]]=!0;var a=[];for(var c in u)u.hasOwnProperty(c)&&a.push(c);return a.sort(),a}function l(e){if(!u(e))throw new Error("not a parser: "+e)}function p(e){if(!o(e))throw new Error("not an array: "+e)}function h(e){if("number"!=typeof e)throw new Error("not a number: "+e)}function d(e){if(!(e instanceof RegExp))throw new Error("not a regexp: "+e);for(var t=w(e),r=0;r<t.length;r++){var n=t.charAt(r);if("i"!==n&&"m"!==n&&"u"!==n)throw new Error('unsupported regexp flag "'+n+'": '+e)}}function m(e){if("function"!=typeof e)throw new Error("not a function: "+e)}function v(e){if("string"!=typeof e)throw new Error("not a string: "+e)}function y(e){return 1===e.length?e[0]:"one of "+e.join(", ")}function g(e,t){var r=t.index,n=r.offset;if(n===e.length)return", got the end of the input";var u=n>0?"'...":"'",o=e.length-n>12?"...'":"'";return" at line "+r.line+" column "+r.column+", got "+u+e.slice(n,n+12)+o}function x(e,t){return"expected "+y(t.expected)+g(e,t)}function w(e){var t=""+e;return t.slice(t.lastIndexOf("/")+1)}function b(e){return RegExp("^(?:"+e.source+")",w(e))}function T(){for(var e=[].slice.call(arguments),t=e.length,r=0;r<t;r+=1)l(e[r]);return n(function(r,n){for(var u,o=new Array(t),a=0;a<t;a+=1){if(u=c(e[a]._(r,n),u),!u.status)return u;o[a]=u.value,n=u.index}return c(i(n,o),u)})}function O(){for(var e={},t=0,r=[].slice.call(arguments),a=r.length,s=0;s<a;s+=1){var f=r[s];if(!u(f)){if(o(f)&&2===f.length&&"string"==typeof f[0]&&u(f[1])){var l=f[0];if(e[l])throw new Error("seqObj: duplicate key "+l);e[l]=!0,t++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===t)throw new Error("seqObj expects at least one named parser, found zero");return n(function(e,t){for(var n,u={},s=0;s<a;s+=1){var f,l;if(o(r[s])?(f=r[s][0],l=r[s][1]):(f=null,l=r[s]),n=c(l._(e,t),n),!n.status)return n;f&&(u[f]=n.value),t=n.index}return c(i(t,u),n)})}function S(){var e=[].slice.call(arguments);if(0===e.length)throw new Error("seqMap needs at least one argument");var t=e.pop();return m(t),T.apply(null,e).map(function(e){return t.apply(null,e)})}function A(e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&function(r){var n=function(){return e[r](t)};t[r]=L(n)}(r);return t}function E(){var e=[].slice.call(arguments),t=e.length;if(0===t)return k("zero alternates");for(var r=0;r<t;r+=1)l(e[r]);return n(function(t,r){for(var n,u=0;u<e.length;u+=1)if(n=c(e[u]._(t,r),n),n.status)return n;return n})}function X(e,t){return P(e,t).or(_([]))}function P(e,t){l(e),l(t);var r=t.then(e).many();return e.chain(function(e){return r.map(function(t){return[e].concat(t)})})}function M(e){v(e);var t="'"+e+"'";return n(function(r,n){var u=n+e.length,o=r.slice(n,u);return o===e?i(u,o):a(n,t)})}function j(e,t){d(e),arguments.length>=2?h(t):t=0;var r=b(e),u=""+e;return n(function(e,n){var o=r.exec(e.slice(n));if(o){if(0<=t&&t<=o.length){var c=o[0],s=o[t];return i(n+c.length,s)}return a(n,"valid match group (0 to "+o.length+") in "+u)}return a(n,u)})}function _(e){return n(function(t,r){return i(r,e)})}function k(e){return n(function(t,r){return a(r,e)})}function B(e){if(u(e))return n(function(t,r){var n=e._(t,r);return n.index=r,n.value="",n});if("string"==typeof e)return B(M(e));if(e instanceof RegExp)return B(j(e));throw new Error("not a string, regexp, or parser: "+e)}function C(e){return l(e),n(function(t,r){var n=e._(t,r),u=t.slice(r,n.index);return n.status?a(r,'not "'+u+'"'):i(r,null)})}function N(e){return m(e),n(function(t,r){var n=t.charAt(r);return r<t.length&&e(n)?i(r+1,n):a(r,"a character matching "+e)})}function D(e){return N(function(t){return e.indexOf(t)>=0})}function q(e){return N(function(t){return e.indexOf(t)<0})}function R(e){return n(e(i,a))}function $(e,t){return N(function(r){return e<=r&&r<=t}).desc(e+"-"+t)}function U(e){return m(e),n(function(t,r){for(var n=r;n<t.length&&e(t.charAt(n));)n++;return i(n,t.slice(r,n))})}function L(e,t){arguments.length<2&&(t=e,e=void 0);var r=n(function(e,n){return r._=t()._,r._(e,n)});return e?r.desc(e):r}function z(){return k("fantasy-land/empty")}var F=n.prototype;F.parse=function(e){if("string"!=typeof e)throw new Error(".parse must be called with a string as its argument");var t=this.skip(J)._(e,0);return t.status?{status:!0,value:t.value}:{status:!1,index:s(e,t.furthest),expected:t.expected}},F.tryParse=function(e){var t=this.parse(e);if(t.status)return t.value;var r=x(e,t),n=new Error(r);throw n.type="ParsimmonError",n.result=t,n},F.or=function(e){return E(this,e)},F.trim=function(e){return this.wrap(e,e)},F.wrap=function(e,t){return S(e,this,t,function(e,t){return t})},F.thru=function(e){return e(this)},F.then=function(e){return l(e),T(this,e).map(function(e){return e[1]})},F.many=function(){var e=this;return n(function(t,r){for(var n=[],u=void 0;;){if(u=c(e._(t,r),u),!u.status)return c(i(r,n),u);r=u.index,n.push(u.value)}})},F.tie=function(){return this.map(function(e){p(e);for(var t="",r=0;r<e.length;r++)v(e[r]),t+=e[r];return t})},F.times=function(e,t){var r=this;return arguments.length<2&&(t=e),h(e),h(t),n(function(n,u){for(var o=[],a=void 0,s=void 0,f=0;f<e;f+=1){if(a=r._(n,u),s=c(a,s),!a.status)return s;u=a.index,o.push(a.value)}for(;f<t&&(a=r._(n,u),s=c(a,s),a.status);f+=1)u=a.index,o.push(a.value);return c(i(u,o),s)})},F.result=function(e){return this.map(function(){return e})},F.atMost=function(e){return this.times(0,e)},F.atLeast=function(e){return S(this.times(e),this.many(),function(e,t){return e.concat(t)})},F.map=function(e){m(e);var t=this;return n(function(r,n){var u=t._(r,n);return u.status?c(i(u.index,e(u.value)),u):u})},F.skip=function(e){return T(this,e).map(function(e){return e[0]})},F.mark=function(){return S(H,this,H,function(e,t,r){return{start:e,value:t,end:r}})},F.node=function(e){return S(H,this,H,function(t,r,n){return{name:e,value:r,start:t,end:n}})},F.sepBy=function(e){return X(this,e)},F.sepBy1=function(e){return P(this,e)},F.lookahead=function(e){return this.skip(B(e))},F.notFollowedBy=function(e){return this.skip(C(e))},F.desc=function(e){var t=this;return n(function(r,n){var u=t._(r,n);return u.status||(u.expected=[e]),u})},F.fallback=function(e){return this.or(_(e))},F.ap=function(e){return S(e,this,function(e,t){return e(t)})},F.chain=function(e){var t=this;return n(function(r,n){var u=t._(r,n);return u.status?c(e(u.value)._(r,u.index),u):u})},F.concat=F.or,F.empty=z,F.of=_,F["fantasy-land/ap"]=F.ap,F["fantasy-land/chain"]=F.chain,F["fantasy-land/concat"]=F.concat,F["fantasy-land/empty"]=F.empty,F["fantasy-land/of"]=F.of,F["fantasy-land/map"]=F.map;var H=n(function(e,t){return i(t,s(e,t))}),W=n(function(e,t){return t>=e.length?a(t,"any character"):i(t+1,e.charAt(t))}),I=n(function(e,t){return i(e.length,e.slice(t))}),J=n(function(e,t){return t<e.length?a(t,"EOF"):i(t,null)}),Z=j(/[0-9]/).desc("a digit"),G=j(/[0-9]*/).desc("optional digits"),K=j(/[a-z]/i).desc("a letter"),Q=j(/[a-z]*/i).desc("optional letters"),V=j(/\s*/).desc("optional whitespace"),Y=j(/\s+/).desc("whitespace");n.all=I,n.alt=E,n.any=W,n.createLanguage=A,n.custom=R,n.digit=Z,n.digits=G,n.empty=z,n.eof=J,n.fail=k,n.formatError=x,n.index=H,n.isParser=u,n.lazy=L,n.letter=K,n.letters=Q,n.lookahead=B,n.makeFailure=a,n.makeSuccess=i,n.noneOf=q,n.notFollowedBy=C,n.of=_,n.oneOf=D,n.optWhitespace=V,n.Parser=n,n.range=$,n.regex=j,n.regexp=j,n.sepBy=X,n.sepBy1=P,n.seq=T,n.seqMap=S,n.seqObj=O,n.string=M,n.succeed=_,n.takeWhile=U,n.test=N,n.whitespace=Y,n["fantasy-land/empty"]=z,n["fantasy-land/of"]=_,e.exports=n}])})}])});
//# sourceMappingURL=latex-parser.min.js.map