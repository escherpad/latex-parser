!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["latex-parser"]=t():e["latex-parser"]=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){"use strict";function n(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{writable:!0,enumerable:!0,configurable:!0};if(!(e instanceof Object))throw new TypeError('"target" isn\'t an Object instance');if(void 0!==t){if(!(t instanceof Object))throw new TypeError('"properties" isn\'t an Object instance');if(void 0===n)n={writable:!0,enumerable:!0,configurable:!0};else if(!(n instanceof Object))throw new TypeError('"attributes" isn\'t an Object instance');if(void 0===r)for(var u in t)void 0!==t[u]&&Object.defineProperty(e,u,Object.create(n,{value:{value:t[u]}}));else if(r instanceof Array)r.forEach(function(r){void 0!==t[r]&&Object.defineProperty(e,r,Object.create(n,{value:{value:t[r]}}))});else{if(!(r instanceof Object))throw new TypeError('"keys" isn\'t an Object instance');for(var i in r){var o=r[i];void 0!==t[o]&&Object.defineProperty(e,i,Object.create(n,{value:{value:t[o]}}))}}}}function u(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!(e instanceof Object))throw new TypeError('"target" isn\'t an Object instance');if(void 0===t)return!0;if(!(t instanceof Object))throw new TypeError('"properties" isn\'t an Object instance');if(void 0===n&&(n=!0),void 0===r){for(var u in t)if(e[u]!==t[u]&&(void 0!==t[u]||!n))return!1}else{if(r instanceof Array)return r.every(function(r){return e[r]===t[r]||void 0===t[r]&&n});if(!(r instanceof Object))throw new TypeError('"keys" isn\'t an Object instance');for(var i in r){var o=r[i];if(e[i]!==t[o]&&(void 0!==t[o]||!n))return!1}}return!0}function i(e){return"number"==typeof e}function o(e){return"string"==typeof e}function a(e,t){if(!e)throw new Error(t);return e}function c(e,t){if(!(e instanceof Object))throw new TypeError(t||"Expected Object");return e}function s(e,t){if("string"!=typeof e)throw new TypeError(t||"Expected string");return e}function f(e,t){if(!l(e))throw new TypeError(t||"Expected Array");return e}function l(e){return!!e&&e.constructor===Array}function p(e,t){return[].concat.apply([],e.map(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.updateProperties=n,t.testProperties=u,t.isNumber=i,t.isString=o,t.mustNotBeUndefined=a,t.mustBeObject=c,t.mustBeString=s,t.mustBeArray=f,t.isArray=l,t.concatMap=p;t.mustBeNumber=function(e,t){if(!i(e))throw new TypeError(t||"Expected number");return e},t.mconcat=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduceRight(e)},t.snd=function(e){return e[1]}},function(e,t,r){"use strict";function n(e){return i(e)||o(e)}function u(e){return K.hasOwnProperty(e)}function i(e){return u(e.type)&&(0,Z.isNumber)(e.value)}function o(e){return d(e.expression)}function a(e){if(void 0===e)return!1;switch(e){case"Parentheses":case"Square":case"Dollar":return!0;default:return!1}}function c(e,t){return void 0!==e&&(void 0===t?"string"==typeof e.name:t===e.name)}function s(e){return void 0!==e&&"string"==typeof e.text}function f(e){return void 0!==e&&(0,Z.isArray)(e.latex)}function l(e){return e.arguments instanceof Array}function p(e){return e===ne.SUP||e===ne.SUB}function h(e){switch(e){case"#":return"\\#";case"$":return"\\$";case"%":return"\\%";case"^":return"\\^{}";case"&":return"\\&";case"{":return"\\{";case"}":return"\\}";case"~":return"\\~{}";case"\\":return"\\textbackslash{}";case"_":return"\\_{}";default:return e}}function m(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return 0===r.length?"string"==typeof e.type:r.some(function(t){return e.type===t})}function d(e){return y(e)||v(e)}function v(e){return M(e)||x(e)||w(e)||T(e)||O(e)||S(e)||E(e)||j(e)}function y(e){return M(e)||g(e)||w(e)||T(e)||O(e)||S(e)||E(e)||j(e)}function g(e){return void 0!==e&&void 0!==e.type&&s(e)&&m(e,ee)}function x(e){return void 0!==e&&"number"==typeof e}function w(e){return c(e)&&l(e)&&m(e,te,re)}function b(e){return w(e)&&0===e.arguments.length}function T(e,t){return m(e,Q)}function O(e){return f(e)&&m(e)&&a(e.type)}function S(e){return void 0!==e&&"boolean"==typeof e.noNewPage&&(void 0===e.measure||n(e.measure))}function A(e){return p(e.type)}function E(e){return f(e)&&m(e,V)}function X(e){return m(e,"FixArg")}function P(e){return m(e,"OptArg")}function j(e){return s(e)&&m(e,Y)}function M(e){return void 0!==e&&0===Object.keys(e).length}function _(e){return{type:"FixArg",latex:e}}function k(e){return 1===e.length?{type:"OptArg",latex:e}:{type:"MOptArg",latex:e}}function C(e){return{type:"SymArg",latex:[e]}}function B(e){return{type:"ParArg",latex:[e]}}function N(e){return{type:"MOptArg",latex:e}}function D(e){return{type:"MSymArg",latex:e}}function q(e){return{type:"MParArg",latex:e}}function R(e){return{name:e,arguments:[],type:re}}function $(e){return{text:e,type:ee,characterCategories:(0,G.convertToTeXCharsDefault)(e)}}function U(e,t,r,n){return{latex:n,type:e,startSymbol:t,endSymbol:r}}function L(e){return{latex:[e],type:V}}function z(e){return{text:e,type:Y}}function F(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return{name:e,arguments:r,type:te}}function H(e,t,r){return{type:e,symbol:t,arguments:r}}function W(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),u=2;u<r;u++)n[u-2]=arguments[u];return{name:e,latex:t,arguments:n,type:Q}}function I(e){var t=[];return J(e,t),t.join("")}function J(e,t){if(w(e))t.push("\\",e.name),e.arguments.forEach(function(e){return J(e,t)});else{if(T(e))throw new Error("not supported yet");if(O(e))t.push(e.startSymbol),e.latex.forEach(function(e){return J(e,t)}),t.push(e.endSymbol);else if(S(e))t.push("\n");else if(A(e))t.push(e.symbol),e.arguments&&e.arguments.forEach(function(e){return J(e,t)});else if(E(e))t.push("{"),e.latex.forEach(function(e){return J(e,t)}),t.push("}");else if(j(e))t.push("%"+e.text+"\n");else if(g(e))t.push(e.text);else{if(x(e))throw new Error("not supported yet");if(X(e))t.push("{"),e.latex.forEach(function(e){return J(e,t)}),t.push("}");else{if(!P(e))throw new Error("Did not recognize "+JSON.stringify(e));t.push("["),e.latex.forEach(function(e){return J(e,t)}),t.push("]")}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.newTeXMathDol=t.protectString=t.fromStringLaTeX=t.SubOrSuperSymbol=t.typeTeXCommS=t.typeTeXComm=t.typeTeXRaw=t.typeTeXComment=t.typeTeXBraces=t.typeTeXEnv=t.typeTeXSeq=t.mathTypes=t.measureTypes=void 0,t.isMeasure=n,t.isMeasureType=u,t.isBuiltInMeasure=i,t.isCustomMeasure=o,t.isMathType=a,t.isNameHaving=c,t.isTextHaving=s,t.isLaTeXHaving=f,t.isArgumentHaving=l,t.isSubOrSuperSymbol=p,t.protectChar=h,t.isTypeHaving=m,t.isLaTeXBlock=d,t.isLaTeXNoRaw=v,t.isLaTeXRaw=y,t.isTeXRaw=g,t.isTeXChar=x,t.isTeXComm=w,t.isTeXCommS=b,t.isTeXEnv=T,t.isTeXMath=O,t.isTeXLineBreak=S,t.isSubOrSuperScript=A,t.isTeXBraces=E,t.isFixArg=X,t.isOptArg=P,t.isTeXComment=j,t.isTeXEmpty=M,t.newFixArg=_,t.newOptArg=k,t.newSymArg=C,t.newParArg=B,t.newMOptArg=N,t.newMSymArg=D,t.newMParArg=q,t.newCommandS=R,t.newTeXRaw=$,t.newTeXMath=U,t.newTeXBraces=L,t.newTeXComment=z,t.newTeXComm=F,t.newSubOrSuperScript=H,t.newTeXEnv=W,t.stringifyLaTeX=I;var Z=r(0),G=r(3),K=t.measureTypes={pt:!0,mm:!0,cm:!0,in:!0,ex:!0,em:!0},Q=(t.mathTypes={Parentheses:"Parentheses",Square:"Square",Dollar:"Dollar"},t.typeTeXSeq="TeXSeq",t.typeTeXEnv="TeXEnv"),V=t.typeTeXBraces="TeXBraces",Y=t.typeTeXComment="TeXComment",ee=t.typeTeXRaw="TeXRaw",te=t.typeTeXComm="TeXComm",re=t.typeTeXCommS="TeXCommS",ne=t.SubOrSuperSymbol=void 0;!function(e){e[e.SUP=0]="SUP",e[e.SUB=1]="SUB"}(ne||(t.SubOrSuperSymbol=ne={}));var ue=(t.fromStringLaTeX=function(e){return $(ue(e))},t.protectString=function(e){for(var t=[],r=0;r<e.length;r++)t.push(h(e.charAt(r)));return t.join()});t.newTeXMathDol=function(e){return U("Dollar","$","$",e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var u=r(1);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var i=r(4);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},function(e,t,r){"use strict";function n(e){return u(i,e)}function u(e,t){for(var r=[],n=0;n<t.length;n++){var u=t.charAt(n);r.push({string:u,category:e(u)})}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.convertToTeXCharsDefault=n,t.convertToTeXChars=u;var i=t.defaultCategories=function(e){switch(e){case"\\":return 0;case"{":return 1;case"}":return 2;case"$":return 3;case"&":return 4;case"\r":return 5;case"#":return 6;case"^":return 7;case"_":return 8;case"\0":return 9;case" ":return 10;case"~":return 13;case"%":return 14;case"d":return 15;default:return 11}}},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){var r=e.length,n=t.length;if(0===r)return t;if(0===n)return e;for(var u={},i=0;i<r;i++)u[e[i]]=!0;for(var o=0;o<n;o++)u[t[o]]=!0;var a=[];for(var c in u)u.hasOwnProperty(c)&&a.push(c);return a.sort(),a}function i(e,t){if(!t)return e;if(e.furthest>t.furthest)return e;var r=e.furthest===t.furthest?u(e.expected,t.expected):t.expected;return{status:e.status,index:e.index,value:e.value,furthest:t.furthest,expected:r}}function o(e,t,r,n){return(0,y.Parser)(function(u,o){for(var a=n,c=0,s=void 0;o<u.length;){var f=t._(u,o);if(f.status){o=(0,x.mustBeNumber)(f.index);break}var l=e._(u,o);if(d(l))return l;if(s=(0,x.mustNotBeUndefined)(i(l,s)),d(s))return s;c++;var p=(0,x.mustNotBeUndefined)(s.value);a=r(a,p),o=(0,x.mustBeNumber)(s.index)}return v(i((0,y.makeSuccess)(o,a),s))})}function a(e,t){return o(e,t,function(e,t){return e.concat([t])},[])}function c(e){return(0,y.Parser)(function(t,r){var n=t.charAt(r);if(r>=t.length||e(n))return(0,y.makeFailure)(r,"text character");var u=[n];r++;for(var i=t.charAt(r);!e(i)&&r<t.length;)u.push(i),r++,i=t.charAt(r);return(0,y.makeSuccess)(r,u.join(""))})}function s(e){return c(l(e)).map(function(e){return(0,g.newTeXRaw)(e)})}function f(e,t){return(void 0===t?k:t).hasOwnProperty(e)}function l(e){return function(t){return e.hasOwnProperty(t)}}function p(e){return e>="A"&&e<="Z"}function h(e){return e>="a"&&e<="z"}function m(e){return void 0!==e&&!0===e.status}function d(e){return void 0!==e&&!1===e.status}function v(e){if(!m(e))throw new Error("Expected parse to be success: "+JSON.stringify(e));return e}Object.defineProperty(t,"__esModule",{value:!0}),t.dolMath=t.shiftedScript=t.subOrSuperscriptSymbolParser=t.command=t.cmdArgs=t.cmdArg=t.optArg=t.fixArg=t.endCmd=t.specialChar=t.environment=t.env=t.latexParser=t.latexBlockParserMathMode=t.latexBlockParser=t.commandSymbol=t.mathSymbol=t.specialCharsDefault=t.comment=t.notTextDefaultAndNotClosingBracket=t.notTextMathModeAndNotClosingBracket=t.notTextMathMode=t.notTextDefault=t.takeTill=t.defaultParserConf=void 0,t.textParser=s,t.isSpecialCharacter=f,t.isNotText=l,t.isOk=m,t.isNotOk=d,t.mustBeOk=v;var y=r(5),g=r(1),x=r(0),w=(t.defaultParserConf={verbatimEnvironments:["verbatim"]},t.takeTill=function(e){return(0,y.takeWhile)(function(t){return!e(t)})}),b=(0,y.regexp)(/[^\n]*/),T=(0,y.regexp)(/\n?/),O=((0,y.regexp)(/\s*/m),(0,y.string)("%")),S=(0,y.string)("["),A=(0,y.string)("]"),E=t.notTextDefault={$:!0,"%":!0,"\\":!0,"{":!0,"]":!0,"}":!0},X=t.notTextMathMode={"^":!0,_:!0,$:!0,"%":!0,"\\":!0,"{":!0,"]":!0,"}":!0},P=t.notTextMathModeAndNotClosingBracket={"^":!0,_:!0,$:!0,"%":!0,"\\":!0,"{":!0,"}":!0},j=t.notTextDefaultAndNotClosingBracket={$:!0,"%":!0,"\\":!0,"{":!0,"}":!0},M=(s(E),s(j),(0,y.regexp)(/ */).map(g.newTeXRaw)),_=t.comment=O.then(b).skip(T).map(g.newTeXComment),k=t.specialCharsDefault={"'":!0,"(":!0,")":!0,",":!0,".":!0,"-":!0,'"':!0,"!":!0,"^":!0,$:!0,"&":!0,"#":!0,"{":!0,"}":!0,"%":!0,"~":!0,"|":!0,"/":!0,":":!0,";":!0,"=":!0,"[":!0,"]":!0,"\\":!0,"`":!0," ":!0},C=(t.mathSymbol=(0,y.string)("$"),t.commandSymbol=(0,y.string)("\\")),B=t.latexBlockParser=(0,y.lazy)(function(){return(0,y.alt)((0,y.alt)(s(E),K,_,s(j),R,J))}),N=t.latexBlockParserMathMode=function(e,t){return(0,y.lazy)(function(){return(0,y.alt)((0,y.alt)(G(e,t),s(X),K,_,s(P),R,J))})},D=(t.latexParser=B.many(),(0,y.string)("{").then(B.many()).skip((0,y.string)("}"))),q=t.env=(0,y.Parser)(function(e,t){var r=(0,y.string)("\\begin").then((0,y.string)("{")).then(M).then((0,y.regexp)(/[a-zA-Z]+/)).skip(M).skip((0,y.string)("}"))._(e,t);if(d(r))return r;t=(0,x.mustBeNumber)(r.index);var n=r.value;return a(B,(0,y.string)("\\end").then((0,y.string)("{")).then(M).then((0,y.string)(n)).then(M).then((0,y.string)("}"))).map(function(e){return(0,g.newTeXEnv)(n,e)})._(e,t)}),R=t.environment=(0,y.alt)(D,q),$=t.specialChar=(0,y.test)(f),U=t.endCmd=function(e){return!h(e)&&!p(e)},L=(0,y.string)("{"),z=(0,y.string)("}"),F=t.fixArg=L.then(a(B,z)).map(g.newFixArg),H=t.optArg=S.then(a(B,A)).map(g.newOptArg),W=t.cmdArg=(0,y.alt)(F,H),I=t.cmdArgs=(0,y.alt)((0,y.string)("{}").map(function(){return[]}),W.map(function(e){return e}).atLeast(0)).map(function(e){return e}),J=t.command=(0,y.seqMap)(C,(0,y.alt)($,w(U)),I,function(e,t,r){return void 0!==r?g.newTeXComm.apply(void 0,[t].concat(n(r))):(0,g.newTeXComm)(t)}).map(function(e){return e}),Z=t.subOrSuperscriptSymbolParser=function(e,t){return(0,y.alt)((0,y.string)(e),(0,y.string)(t)).map(function(t){return t===e?g.SubOrSuperSymbol.SUB:g.SubOrSuperSymbol.SUP})},G=t.shiftedScript=function(e,t){return(0,y.seqMap)(Z(e,t),I,function(r,n){return(0,g.newSubOrSuperScript)(r,r===g.SubOrSuperSymbol.SUB?e:t,n)}).map(function(e){return e})},K=t.dolMath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Dollar",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"$";return(0,y.string)(t).then(N("_","^").many().map(function(n){return(0,g.newTeXMath)(e,t,r,n)})).skip((0,y.string)(r))}()},function(e,t,r){!function(t,r){e.exports=r()}(0,function(){return function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);this._=e}function u(e){return e instanceof n}function i(e){return"[object Array]"==={}.toString.call(e)}function o(e,t){return{status:!0,index:e,value:t,furthest:-1,expected:[]}}function a(e,t){return{status:!1,index:-1,value:null,furthest:e,expected:[t]}}function c(e,t){if(!t)return e;if(e.furthest>t.furthest)return e;var r=e.furthest===t.furthest?f(e.expected,t.expected):t.expected;return{status:e.status,index:e.index,value:e.value,furthest:t.furthest,expected:r}}function s(e,t){var r=e.slice(0,t).split("\n");return{offset:t,line:r.length,column:r[r.length-1].length+1}}function f(e,t){var r=e.length,n=t.length;if(0===r)return t;if(0===n)return e;for(var u={},i=0;i<r;i++)u[e[i]]=!0;for(var o=0;o<n;o++)u[t[o]]=!0;var a=[];for(var c in u)u.hasOwnProperty(c)&&a.push(c);return a.sort(),a}function l(e){if(!u(e))throw new Error("not a parser: "+e)}function p(e){if(!i(e))throw new Error("not an array: "+e)}function h(e){if("number"!=typeof e)throw new Error("not a number: "+e)}function m(e){if(!(e instanceof RegExp))throw new Error("not a regexp: "+e);for(var t=w(e),r=0;r<t.length;r++){var n=t.charAt(r);if("i"!==n&&"m"!==n&&"u"!==n)throw new Error('unsupported regexp flag "'+n+'": '+e)}}function d(e){if("function"!=typeof e)throw new Error("not a function: "+e)}function v(e){if("string"!=typeof e)throw new Error("not a string: "+e)}function y(e){return 1===e.length?e[0]:"one of "+e.join(", ")}function g(e,t){var r=t.index,n=r.offset;if(n===e.length)return", got the end of the input";var u=n>0?"'...":"'",i=e.length-n>12?"...'":"'";return" at line "+r.line+" column "+r.column+", got "+u+e.slice(n,n+12)+i}function x(e,t){return"expected "+y(t.expected)+g(e,t)}function w(e){var t=""+e;return t.slice(t.lastIndexOf("/")+1)}function b(e){return RegExp("^(?:"+e.source+")",w(e))}function T(){for(var e=[].slice.call(arguments),t=e.length,r=0;r<t;r+=1)l(e[r]);return n(function(r,n){for(var u,i=new Array(t),a=0;a<t;a+=1){if(u=c(e[a]._(r,n),u),!u.status)return u;i[a]=u.value,n=u.index}return c(o(n,i),u)})}function O(){for(var e={},t=0,r=[].slice.call(arguments),a=r.length,s=0;s<a;s+=1){var f=r[s];if(!u(f)){if(i(f)&&2===f.length&&"string"==typeof f[0]&&u(f[1])){var l=f[0];if(e[l])throw new Error("seqObj: duplicate key "+l);e[l]=!0,t++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===t)throw new Error("seqObj expects at least one named parser, found zero");return n(function(e,t){for(var n,u={},s=0;s<a;s+=1){var f,l;if(i(r[s])?(f=r[s][0],l=r[s][1]):(f=null,l=r[s]),n=c(l._(e,t),n),!n.status)return n;f&&(u[f]=n.value),t=n.index}return c(o(t,u),n)})}function S(){var e=[].slice.call(arguments);if(0===e.length)throw new Error("seqMap needs at least one argument");var t=e.pop();return d(t),T.apply(null,e).map(function(e){return t.apply(null,e)})}function A(e){var t={};for(var r in e)({}).hasOwnProperty.call(e,r)&&function(r){var n=function(){return e[r](t)};t[r]=L(n)}(r);return t}function E(){var e=[].slice.call(arguments),t=e.length;if(0===t)return k("zero alternates");for(var r=0;r<t;r+=1)l(e[r]);return n(function(t,r){for(var n,u=0;u<e.length;u+=1)if(n=c(e[u]._(t,r),n),n.status)return n;return n})}function X(e,t){return P(e,t).or(_([]))}function P(e,t){l(e),l(t);var r=t.then(e).many();return e.chain(function(e){return r.map(function(t){return[e].concat(t)})})}function j(e){v(e);var t="'"+e+"'";return n(function(r,n){var u=n+e.length,i=r.slice(n,u);return i===e?o(u,i):a(n,t)})}function M(e,t){m(e),arguments.length>=2?h(t):t=0;var r=b(e),u=""+e;return n(function(e,n){var i=r.exec(e.slice(n));if(i){if(0<=t&&t<=i.length){var c=i[0],s=i[t];return o(n+c.length,s)}return a(n,"valid match group (0 to "+i.length+") in "+u)}return a(n,u)})}function _(e){return n(function(t,r){return o(r,e)})}function k(e){return n(function(t,r){return a(r,e)})}function C(e){if(u(e))return n(function(t,r){var n=e._(t,r);return n.index=r,n.value="",n});if("string"==typeof e)return C(j(e));if(e instanceof RegExp)return C(M(e));throw new Error("not a string, regexp, or parser: "+e)}function B(e){return l(e),n(function(t,r){var n=e._(t,r),u=t.slice(r,n.index);return n.status?a(r,'not "'+u+'"'):o(r,null)})}function N(e){return d(e),n(function(t,r){var n=t.charAt(r);return r<t.length&&e(n)?o(r+1,n):a(r,"a character matching "+e)})}function D(e){return N(function(t){return e.indexOf(t)>=0})}function q(e){return N(function(t){return e.indexOf(t)<0})}function R(e){return n(e(o,a))}function $(e,t){return N(function(r){return e<=r&&r<=t}).desc(e+"-"+t)}function U(e){return d(e),n(function(t,r){for(var n=r;n<t.length&&e(t.charAt(n));)n++;return o(n,t.slice(r,n))})}function L(e,t){arguments.length<2&&(t=e,e=void 0);var r=n(function(e,n){return r._=t()._,r._(e,n)});return e?r.desc(e):r}function z(){return k("fantasy-land/empty")}var F=n.prototype;F.parse=function(e){if("string"!=typeof e)throw new Error(".parse must be called with a string as its argument");var t=this.skip(J)._(e,0);return t.status?{status:!0,value:t.value}:{status:!1,index:s(e,t.furthest),expected:t.expected}},F.tryParse=function(e){var t=this.parse(e);if(t.status)return t.value;var r=x(e,t),n=new Error(r);throw n.type="ParsimmonError",n.result=t,n},F.or=function(e){return E(this,e)},F.trim=function(e){return this.wrap(e,e)},F.wrap=function(e,t){return S(e,this,t,function(e,t){return t})},F.thru=function(e){return e(this)},F.then=function(e){return l(e),T(this,e).map(function(e){return e[1]})},F.many=function(){var e=this;return n(function(t,r){for(var n=[],u=void 0;;){if(u=c(e._(t,r),u),!u.status)return c(o(r,n),u);r=u.index,n.push(u.value)}})},F.tie=function(){return this.map(function(e){p(e);for(var t="",r=0;r<e.length;r++)v(e[r]),t+=e[r];return t})},F.times=function(e,t){var r=this;return arguments.length<2&&(t=e),h(e),h(t),n(function(n,u){for(var i=[],a=void 0,s=void 0,f=0;f<e;f+=1){if(a=r._(n,u),s=c(a,s),!a.status)return s;u=a.index,i.push(a.value)}for(;f<t&&(a=r._(n,u),s=c(a,s),a.status);f+=1)u=a.index,i.push(a.value);return c(o(u,i),s)})},F.result=function(e){return this.map(function(){return e})},F.atMost=function(e){return this.times(0,e)},F.atLeast=function(e){return S(this.times(e),this.many(),function(e,t){return e.concat(t)})},F.map=function(e){d(e);var t=this;return n(function(r,n){var u=t._(r,n);return u.status?c(o(u.index,e(u.value)),u):u})},F.skip=function(e){return T(this,e).map(function(e){return e[0]})},F.mark=function(){return S(H,this,H,function(e,t,r){return{start:e,value:t,end:r}})},F.node=function(e){return S(H,this,H,function(t,r,n){return{name:e,value:r,start:t,end:n}})},F.sepBy=function(e){return X(this,e)},F.sepBy1=function(e){return P(this,e)},F.lookahead=function(e){return this.skip(C(e))},F.notFollowedBy=function(e){return this.skip(B(e))},F.desc=function(e){var t=this;return n(function(r,n){var u=t._(r,n);return u.status||(u.expected=[e]),u})},F.fallback=function(e){return this.or(_(e))},F.ap=function(e){return S(e,this,function(e,t){return e(t)})},F.chain=function(e){var t=this;return n(function(r,n){var u=t._(r,n);return u.status?c(e(u.value)._(r,u.index),u):u})},F.concat=F.or,F.empty=z,F.of=_,F["fantasy-land/ap"]=F.ap,F["fantasy-land/chain"]=F.chain,F["fantasy-land/concat"]=F.concat,F["fantasy-land/empty"]=F.empty,F["fantasy-land/of"]=F.of,F["fantasy-land/map"]=F.map;var H=n(function(e,t){return o(t,s(e,t))}),W=n(function(e,t){return t>=e.length?a(t,"any character"):o(t+1,e.charAt(t))}),I=n(function(e,t){return o(e.length,e.slice(t))}),J=n(function(e,t){return t<e.length?a(t,"EOF"):o(t,null)}),Z=M(/[0-9]/).desc("a digit"),G=M(/[0-9]*/).desc("optional digits"),K=M(/[a-z]/i).desc("a letter"),Q=M(/[a-z]*/i).desc("optional letters"),V=M(/\s*/).desc("optional whitespace"),Y=M(/\s+/).desc("whitespace");n.all=I,n.alt=E,n.any=W,n.createLanguage=A,n.custom=R,n.digit=Z,n.digits=G,n.empty=z,n.eof=J,n.fail=k,n.formatError=x,n.index=H,n.isParser=u,n.lazy=L,n.letter=K,n.letters=Q,n.lookahead=C,n.makeFailure=a,n.makeSuccess=o,n.noneOf=q,n.notFollowedBy=B,n.of=_,n.oneOf=D,n.optWhitespace=V,n.Parser=n,n.range=$,n.regex=M,n.regexp=M,n.sepBy=X,n.sepBy1=P,n.seq=T,n.seqMap=S,n.seqObj=O,n.string=j,n.succeed=_,n.takeWhile=U,n.test=N,n.whitespace=Y,n["fantasy-land/empty"]=z,n["fantasy-land/of"]=_,e.exports=n}])})}])});
//# sourceMappingURL=latex-parser.min.js.map